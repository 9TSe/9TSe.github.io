<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>窗口 | NineTSe</title><meta name="author" content="NineTSe"><meta name="copyright" content="NineTSe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. 基础窗口类1.1 QWidget QWidget类是所有窗口类的父类(控件类是也属于窗口类), 并且QWidget类的父类的QObject,也就意味着所有的窗口类对象只要指定了父对象, 都可以实现内存资源的自动回收。关于这个窗口类的属性介绍, 参考容器控件之QWidget。   1.1.1 设置父对象123456789&#x2F;&#x2F; 构造函数QWidget::QWidget(QWidget *pare">
<meta property="og:type" content="article">
<meta property="og:title" content="窗口">
<meta property="og:url" content="http://example.com/2023/10/22/%E7%AA%97%E5%8F%A3/index.html">
<meta property="og:site_name" content="NineTSe">
<meta property="og:description" content="1. 基础窗口类1.1 QWidget QWidget类是所有窗口类的父类(控件类是也属于窗口类), 并且QWidget类的父类的QObject,也就意味着所有的窗口类对象只要指定了父对象, 都可以实现内存资源的自动回收。关于这个窗口类的属性介绍, 参考容器控件之QWidget。   1.1.1 设置父对象123456789&#x2F;&#x2F; 构造函数QWidget::QWidget(QWidget *pare">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/pic/5.png">
<meta property="article:published_time" content="2023-10-22T01:53:58.000Z">
<meta property="article:modified_time" content="2023-10-22T03:44:26.657Z">
<meta property="article:author" content="NineTSe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/pic/5.png"><link rel="shortcut icon" href="/pic/12.png"><link rel="canonical" href="http://example.com/2023/10/22/%E7%AA%97%E5%8F%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '窗口',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-22 11:44:26'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="NineTSe" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/pic/avater.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('/pic/5.png')"><nav id="nav"><span id="blog-info"><a href="/" title="NineTSe"><img class="site-icon" src="/pic/9.png"/></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">窗口</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-22T01:53:58.000Z" title="发表于 2023-10-22 09:53:58">2023-10-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-22T03:44:26.657Z" title="更新于 2023-10-22 11:44:26">2023-10-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Qt/">Qt</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="窗口"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-基础窗口类"><a href="#1-基础窗口类" class="headerlink" title="1. 基础窗口类"></a>1. 基础窗口类</h1><h2 id="1-1-QWidget"><a href="#1-1-QWidget" class="headerlink" title="1.1 QWidget"></a>1.1 QWidget</h2><blockquote>
<p>QWidget类是所有窗口类的父类(控件类是也属于窗口类), 并且QWidget类的父类的QObject,<br>也就意味着<code>所有的窗口类对象只要指定了父对象, 都可以实现内存资源的自动回收。</code><br>关于这个窗口类的属性介绍, 参考容器控件之QWidget。</p>
</blockquote>
<p><img src="/img/9.53.png" alt="在这里插入图片描述"></p>
<h3 id="1-1-1-设置父对象"><a href="#1-1-1-设置父对象" class="headerlink" title="1.1.1 设置父对象"></a>1.1.1 设置父对象</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">QWidget::<span class="built_in">QWidget</span>(QWidget *parent = <span class="literal">nullptr</span>, Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共成员函数</span></span><br><span class="line"><span class="comment">// 给当前窗口设置父对象</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setParent</span><span class="params">(QWidget *parent)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setParent</span><span class="params">(QWidget *parent, Qt::WindowFlags f)</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的父对象, 没有父对象返回 nullptr</span></span><br><span class="line"><span class="function">QWidget *<span class="title">QWidget::parentWidget</span><span class="params">()</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-1-2-窗口位置"><a href="#1-1-2-窗口位置" class="headerlink" title="1.1.2 窗口位置"></a>1.1.2 窗口位置</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------- 窗口位置 -------------</span></span><br><span class="line"><span class="comment">// 得到相对于当前窗口父窗口的几何信息, 边框也被计算在内</span></span><br><span class="line"><span class="function">QRect <span class="title">QWidget::frameGeometry</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 得到相对于当前窗口父窗口的几何信息, 不包括边框</span></span><br><span class="line"><span class="function"><span class="type">const</span> QRect &amp;<span class="title">geometry</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的几何信息(位置和尺寸信息), 不包括边框</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGeometry</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGeometry</span><span class="params">(<span class="type">const</span> QRect &amp;)</span></span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 移动窗口, 重新设置窗口的位置</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">const</span> QPoint &amp;)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>窗口位置设定和位置获取的测试代码如下:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取当前窗口的位置信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_positionBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QRect rect = <span class="keyword">this</span>-&gt;<span class="built_in">frameGeometry</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;左上角: &quot;</span> &lt;&lt; rect.<span class="built_in">topLeft</span>()</span><br><span class="line">             &lt;&lt; <span class="string">&quot;右上角: &quot;</span> &lt;&lt; rect.<span class="built_in">topRight</span>()</span><br><span class="line">             &lt;&lt; <span class="string">&quot;左下角: &quot;</span> &lt;&lt; rect.<span class="built_in">bottomLeft</span>()</span><br><span class="line">             &lt;&lt; <span class="string">&quot;右下角: &quot;</span> &lt;&lt; rect.<span class="built_in">bottomRight</span>()</span><br><span class="line">             &lt;&lt; <span class="string">&quot;宽度: &quot;</span> &lt;&lt; rect.<span class="built_in">width</span>()</span><br><span class="line">             &lt;&lt; <span class="string">&quot;高度: &quot;</span> &lt;&lt; rect.<span class="built_in">height</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新设置当前窗口的位置以及宽度, 高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_geometryBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">100</span> + <span class="built_in">rand</span>() % <span class="number">500</span>;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">100</span> + <span class="built_in">rand</span>() % <span class="number">500</span>;</span><br><span class="line">    <span class="type">int</span> width = <span class="keyword">this</span>-&gt;<span class="built_in">width</span>() + <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> height = <span class="keyword">this</span>-&gt;<span class="built_in">height</span>() + <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">setGeometry</span>(x, y, width, height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 move() 方法移动窗口</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_moveBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QRect rect = <span class="keyword">this</span>-&gt;<span class="built_in">frameGeometry</span>();</span><br><span class="line">    <span class="built_in">move</span>(rect.<span class="built_in">topLeft</span>() + <span class="built_in">QPoint</span>(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-1-3-窗口尺寸"><a href="#1-1-3-窗口尺寸" class="headerlink" title="1.1.3 窗口尺寸"></a>1.1.3 窗口尺寸</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------- 窗口尺寸 -------------</span></span><br><span class="line"><span class="comment">// 获取当前窗口的尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">size</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"><span class="comment">// 重新设置窗口的尺寸信息</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">resize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">maximumSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小尺寸信息</span></span><br><span class="line"><span class="function">QSize <span class="title">minimumSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口固定的尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedSize</span><span class="params">(<span class="type">const</span> QSize &amp;s)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedSize</span><span class="params">(<span class="type">int</span> w, <span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的最大尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumSize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumSize</span><span class="params">(<span class="type">int</span> maxw, <span class="type">int</span> maxh)</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的最小尺寸信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumSize</span><span class="params">(<span class="type">const</span> QSize &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumSize</span><span class="params">(<span class="type">int</span> minw, <span class="type">int</span> minh)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前窗口的高度    </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">height</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小高度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">minimumHeight</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大高度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maximumHeight</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置固定的高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedHeight</span><span class="params">(<span class="type">int</span> h)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最大高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumHeight</span><span class="params">(<span class="type">int</span> maxh)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最小高度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumHeight</span><span class="params">(<span class="type">int</span> minh)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前窗口的宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">width</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最小宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">minimumWidth</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 获取当前窗口的最大宽度</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maximumWidth</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置固定宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFixedWidth</span><span class="params">(<span class="type">int</span> w)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最大宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMaximumWidth</span><span class="params">(<span class="type">int</span> maxw)</span></span>;</span><br><span class="line"><span class="comment">// 给窗口设置最小宽度</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setMinimumWidth</span><span class="params">(<span class="type">int</span> minw)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-1-4-窗口标题和图标"><a href="#1-1-4-窗口标题和图标" class="headerlink" title="1.1.4 窗口标题和图标"></a>1.1.4 窗口标题和图标</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------- 窗口图标 -------------</span></span><br><span class="line"><span class="comment">// 得到当前窗口的图标</span></span><br><span class="line"><span class="function">QIcon <span class="title">windowIcon</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 构造图标对象, 参数为图片的路径</span></span><br><span class="line">QIcon::<span class="built_in">QIcon</span>(<span class="type">const</span> QString &amp;fileName);</span><br><span class="line"><span class="comment">// 设置当前窗口的图标</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowIcon</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口标题 -------------</span></span><br><span class="line"><span class="comment">// 得到当前窗口的标题</span></span><br><span class="line"><span class="function">QString <span class="title">windowTitle</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置当前窗口的标题</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowTitle</span><span class="params">(<span class="type">const</span> QString &amp;)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-1-5-信号"><a href="#1-1-5-信号" class="headerlink" title="1.1.5 信号"></a>1.1.5 信号</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// QWidget::setContextMenuPolicy(Qt::ContextMenuPolicy policy);</span></span><br><span class="line"><span class="comment">// 窗口的右键菜单策略 contextMenuPolicy() 参数设置为 Qt::CustomContextMenu, 按下鼠标右键发射该信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::customContextMenuRequested</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span></span>;</span><br><span class="line"><span class="comment">// 窗口图标发生变化, 发射此信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::windowIconChanged</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span>;</span><br><span class="line"><span class="comment">// 窗口标题发生变化, 发射此信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::windowTitleChanged</span><span class="params">(<span class="type">const</span> QString &amp;title)</span></span>;</span><br></pre></td></tr></table></figure>

<p>基于窗口策略实现右键菜单具体操作参考 Qt右键菜单的添加和使用(本章第六部分)</p>
<hr>
<h3 id="1-1-6-槽函数"><a href="#1-1-6-槽函数" class="headerlink" title="1.1.6 槽函数"></a>1.1.6 槽函数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//------------- 窗口显示 -------------</span></span><br><span class="line"><span class="comment">// 关闭当前窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">bool</span> <span class="title">QWidget::close</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 隐藏当前窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::hide</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 显示当前创建以及其子窗口</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::show</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 全屏显示当前窗口, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showFullScreen</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 窗口最大化显示, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showMaximized</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 窗口最小化显示, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showMinimized</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 将窗口回复为最大化/最小化之前的状态, 只对windows有效</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::showNormal</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------- 窗口状态 -------------</span></span><br><span class="line"><span class="comment">// 判断窗口是否可用</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QWidget::isEnabled</span><span class="params">()</span> <span class="type">const</span></span>; <span class="comment">// 非槽函数</span></span><br><span class="line"><span class="comment">// 设置窗口是否可用, 不可用窗口无法接收和处理窗口事件</span></span><br><span class="line"><span class="comment">// 参数true-&gt;可用, false-&gt;不可用</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::setEnabled</span><span class="params">(<span class="type">bool</span>)</span></span>;</span><br><span class="line"><span class="comment">// 设置窗口是否可用, 不可用窗口无法接收和处理窗口事件</span></span><br><span class="line"><span class="comment">// 参数true-&gt;不可用, false-&gt;可用</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QWidget::setDisabled</span><span class="params">(<span class="type">bool</span> disable)</span></span>;</span><br><span class="line"><span class="comment">// 设置窗口是否可见, 参数为true-&gt;可见, false-&gt;不可见</span></span><br><span class="line">[slot] <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">QWidget::setVisible</span><span class="params">(<span class="type">bool</span> visible)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="1-2-QDialog"><a href="#1-2-QDialog" class="headerlink" title="1.2 QDialog"></a>1.2 QDialog</h2><h3 id="1-2-1-常用API"><a href="#1-2-1-常用API" class="headerlink" title="1.2.1 常用API"></a>1.2.1 常用API</h3><blockquote>
<p>对话框类是<code>QWidget</code>类的子类, 处理继承自父类的属性之外, 还有一些自己所特有的属性</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">QDialog::<span class="built_in">QDialog</span>(QWidget *parent = <span class="literal">nullptr</span>, Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模态显示窗口</span></span><br><span class="line">[<span class="keyword">virtual</span> slot] <span class="function"><span class="type">int</span> <span class="title">QDialog::exec</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 隐藏模态窗口, 并且解除模态窗口的阻塞, 将 exec() 的返回值设置为 QDialog::Accepted</span></span><br><span class="line">[<span class="keyword">virtual</span> slot] <span class="function"><span class="type">void</span> <span class="title">QDialog::accept</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 隐藏模态窗口, 并且解除模态窗口的阻塞, 将 exec() 的返回值设置为 QDialog::Rejected</span></span><br><span class="line">[<span class="keyword">virtual</span> slot] <span class="function"><span class="type">void</span> <span class="title">QDialog::reject</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 关闭对话框并将其结果代码设置为r。finished()信号将发出r;</span></span><br><span class="line"><span class="comment">// 如果r是QDialog::Accepted 或 QDialog::Rejected，则还将分别发出accept()或Rejected()信号。</span></span><br><span class="line">[<span class="keyword">virtual</span> slot] <span class="function"><span class="type">void</span> <span class="title">QDialog::done</span><span class="params">(<span class="type">int</span> r)</span></span>;</span><br><span class="line"></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QDialog::accepted</span><span class="params">()</span></span>;</span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QDialog::rejected</span><span class="params">()</span></span>;</span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QDialog::finished</span><span class="params">(<span class="type">int</span> result)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-2-2-常用使用方法"><a href="#1-2-2-常用使用方法" class="headerlink" title="1.2.2 常用使用方法"></a>1.2.2 常用使用方法</h3><blockquote>
<p>场景介绍:</p>
<ol>
<li>有两个窗口, 主窗口和一个对话框子窗口</li>
<li>对话框窗口先显示, 根据用户操作选择是否显示主窗口</li>
</ol>
</blockquote>
<ul>
<li>关于对话框窗口类的操作</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对话框窗口中三个普通按钮按下之后对应的槽函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDialog::on_acceptBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">accept</span>();  <span class="comment">// exec()函数返回值为QDialog::Accepted</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDialog::on_rejectBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">reject</span>();  <span class="comment">// exec()函数返回值为QDialog::Rejected</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDialog::on_donBtn_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// exec()函数返回值为 done() 的参数, 并根据参数发射出对应的信号</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">done</span>(<span class="number">666</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>根据用户针对对话框窗口的按钮操作, 进行相应的逻辑处理。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对话框对象</span></span><br><span class="line">MyDialog dlg;    </span><br><span class="line"><span class="type">int</span> ret = dlg.<span class="built_in">exec</span>();</span><br><span class="line"><span class="keyword">if</span>(ret == QDialog::Accepted)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;accept button clicked...&quot;</span>;</span><br><span class="line">    <span class="comment">// 显示主窗口</span></span><br><span class="line">    MainWindow* w = <span class="keyword">new</span> MainWindow;</span><br><span class="line">    w-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ret == QDialog::Rejected)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;reject button clicked...&quot;</span>;</span><br><span class="line">    <span class="comment">// 不显示主窗口</span></span><br><span class="line">    ......</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ret == 666</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;done button clicked...&quot;</span>;</span><br><span class="line">    <span class="comment">// 根据需求进行逻辑处理</span></span><br><span class="line">    ......</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="1-3-QDialog的子类"><a href="#1-3-QDialog的子类" class="headerlink" title="1.3 QDialog的子类"></a>1.3 QDialog的子类</h2><h3 id="1-3-1-QMessageBox"><a href="#1-3-1-QMessageBox" class="headerlink" title="1.3.1 QMessageBox"></a>1.3.1 QMessageBox</h3><blockquote>
<p><code>QMessageBox</code> 对话框类是 <code>QDialog</code> 类的子类<br>通过这个类可显示一些简单的提示框,用于展示警告、错误、问题等信息。<br>关于这个类只需掌握一些静态方法即可。</p>
</blockquote>
<h4 id="1-3-1-1-API-静态函数"><a href="#1-3-1-1-API-静态函数" class="headerlink" title="1.3.1.1 API - 静态函数"></a>1.3.1.1 API - 静态函数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显示一个模态对话框, 将参数 text 的信息展示到窗口中</span></span><br><span class="line">[<span class="type">static</span>] <span class="function"><span class="type">void</span> <span class="title">QMessageBox::about</span><span class="params">(QWidget *parent, <span class="type">const</span> QString &amp;title, <span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">- parent: 对话框窗口的父窗口</span></span><br><span class="line"><span class="comment">- title: 对话框窗口的标题</span></span><br><span class="line"><span class="comment">- text: 对话框窗口中显示的提示信息</span></span><br><span class="line"><span class="comment">- buttons: 对话框窗口中显示的按钮(一个或多个)</span></span><br><span class="line"><span class="comment">- defaultButton</span></span><br><span class="line"><span class="comment">    1. defaultButton指定按下Enter键时使用的按钮。</span></span><br><span class="line"><span class="comment">    2. defaultButton必须引用在参数 buttons 中给定的按钮。</span></span><br><span class="line"><span class="comment">    3. 如果defaultButton是QMessageBox::NoButton, QMessageBox会自动选择一个合适的默认值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 显示一个信息模态对话框</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QMessageBox::StandardButton <span class="title">QMessageBox::information</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">           <span class="type">const</span> QString &amp;text, </span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButtons buttons = Ok,</span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButton defaultButton = NoButton)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示一个错误模态对话框</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QMessageBox::StandardButton <span class="title">QMessageBox::critical</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">           <span class="type">const</span> QString &amp;text, </span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButtons buttons = Ok,</span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButton defaultButton = NoButton)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示一个问题模态对话框</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QMessageBox::StandardButton <span class="title">QMessageBox::question</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">           <span class="type">const</span> QString &amp;text, </span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButtons buttons = StandardButtons(Yes | No), </span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButton defaultButton = NoButton)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示一个警告模态对话框</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QMessageBox::StandardButton <span class="title">QMessageBox::warning</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">           QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">           <span class="type">const</span> QString &amp;text, </span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButtons buttons = Ok,</span></span></span><br><span class="line"><span class="params"><span class="function">           QMessageBox::StandardButton defaultButton = NoButton)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-1-2-测试代码"><a href="#1-3-1-2-测试代码" class="headerlink" title="1.3.1.2 测试代码"></a>1.3.1.2 测试代码</h4><ul>
<li>测试代码片段</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_msgbox_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QMessageBox::<span class="built_in">about</span>(<span class="keyword">this</span>, <span class="string">&quot;about&quot;</span>,  <span class="string">&quot;这是一个简单的消息提示框!!!&quot;</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">critical</span>(<span class="keyword">this</span>, <span class="string">&quot;critical&quot;</span>, <span class="string">&quot;这是一个错误对话框-critical...&quot;</span>);</span><br><span class="line">    <span class="type">int</span> ret = QMessageBox::<span class="built_in">question</span>(<span class="keyword">this</span>, <span class="string">&quot;question&quot;</span>, </span><br><span class="line">             <span class="string">&quot;你要保存修改的文件内容吗???&quot;</span>,                                 </span><br><span class="line">              QMessageBox::Save|QMessageBox::Cancel, </span><br><span class="line">              QMessageBox::Cancel);</span><br><span class="line">    <span class="keyword">if</span>(ret == QMessageBox::Save)</span><br><span class="line">    &#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;information&quot;</span>, <span class="string">&quot;恭喜你保存成功了, o(*￣︶￣*)o!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ret == QMessageBox::Cancel)</span><br><span class="line">    &#123;</span><br><span class="line">        QMessageBox::<span class="built_in">warning</span>(<span class="keyword">this</span>, <span class="string">&quot;warning&quot;</span>, <span class="string">&quot;你放弃了保存, ┭┮﹏┭┮ !!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>得到的对话框窗口效果如下图:<br><img src="/img/9.54.png" alt="在这里插入图片描述"></li>
</ul>
<hr>
<h3 id="1-3-2-QFileDialog"><a href="#1-3-2-QFileDialog" class="headerlink" title="1.3.2 QFileDialog"></a>1.3.2 QFileDialog</h3><blockquote>
<p><code>QFileDialog</code> 对话框类是 <code>QDialog</code> 类的子类<br>通过这个类可以选择要打开&#x2F;保存的文件或者目录。<br>关于这个类只需掌握一些静态方法的使用即可。</p>
</blockquote>
<h4 id="1-3-2-1-API-静态函数"><a href="#1-3-2-1-API-静态函数" class="headerlink" title="1.3.2.1 API - 静态函数"></a>1.3.2.1 API - 静态函数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">通用参数:</span></span><br><span class="line"><span class="comment">  - parent: 当前对话框窗口的父对象也就是父窗口</span></span><br><span class="line"><span class="comment">  - caption: 当前对话框窗口的标题</span></span><br><span class="line"><span class="comment">  - dir: 当前对话框窗口打开的默认目录</span></span><br><span class="line"><span class="comment">  - options: 当前对话框窗口的一些可选项,枚举类型, 一般不需要进行设置, 使用默认值即可</span></span><br><span class="line"><span class="comment">  - filter: 过滤器, 在对话框中只显示满足条件的文件, 可以指定多个过滤器, 使用 ;; 分隔</span></span><br><span class="line"><span class="comment">    - 样式举例: </span></span><br><span class="line"><span class="comment">	- Images (*.png *.jpg)</span></span><br><span class="line"><span class="comment">	- Images (*.png *.jpg);;Text files (*.txt)</span></span><br><span class="line"><span class="comment">  - selectedFilter: 如果指定了多个过滤器, 通过该参数指定默认使用哪一个, 不指定默认使用第一个过滤器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 打开一个目录, 得到这个目录的绝对路径</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QFileDialog::getExistingDirectory</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">                  QWidget *parent = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;caption = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;dir = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  QFileDialog::Options options = ShowDirsOnly)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开一个文件, 得到这个文件的绝对路径</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QFileDialog::getOpenFileName</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    	          QWidget *parent = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		  <span class="type">const</span> QString &amp;caption = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;dir = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;filter = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  QString *selectedFilter = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  QFileDialog::Options options = Options())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开多个文件, 得到这多个文件的绝对路径</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QStringList <span class="title">QFileDialog::getOpenFileNames</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    	          QWidget *parent = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;caption = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;dir = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;filter = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  QString *selectedFilter = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  QFileDialog::Options options = Options())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开一个目录, 使用这个目录来保存指定的文件</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QFileDialog::getSaveFileName</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		  QWidget *parent = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;caption = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;dir = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="type">const</span> QString &amp;filter = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">                  QString *selectedFilter = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">                  QFileDialog::Options options = Options())</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-2-2-测试代码"><a href="#1-3-2-2-测试代码" class="headerlink" title="1.3.2.2 测试代码"></a>1.3.2.2 测试代码</h4><ul>
<li>打开一个已存在的本地目录</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_filedlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString dirName = QFileDialog::<span class="built_in">getExistingDirectory</span>(<span class="keyword">this</span>, <span class="string">&quot;打开目录&quot;</span>, <span class="string">&quot;e:\\temp&quot;</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;打开目录&quot;</span>, <span class="string">&quot;您选择的目录是: &quot;</span> + dirName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>对话框效果如下:<br><img src="/img/9.55.png" alt="在这里插入图片描述"></p>
</li>
<li><p>打开一个本地文件</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_filedlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QString <span class="title">arg</span><span class="params">(<span class="string">&quot;Text files (*.txt)&quot;</span>)</span></span>;</span><br><span class="line">    QString fileName = QFileDialog::<span class="built_in">getOpenFileName</span>(</span><br><span class="line">              <span class="keyword">this</span>, <span class="string">&quot;Open File&quot;</span>, <span class="string">&quot;e:\\temp&quot;</span>,</span><br><span class="line">              <span class="string">&quot;Images (*.png *.jpg);;Text files (*.txt)&quot;</span>, &amp;arg);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;打开文件&quot;</span>, <span class="string">&quot;您选择的文件是: &quot;</span> + fileName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对话框效果如下:</li>
</ul>
<p><img src="/img/9.56.png" alt="在这里插入图片描述"></p>
<ul>
<li>打开多个本地文件</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_filedlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QStringList fileNames = QFileDialog::<span class="built_in">getOpenFileNames</span>(</span><br><span class="line">              <span class="keyword">this</span>, <span class="string">&quot;Open File&quot;</span>, <span class="string">&quot;e:\\temp&quot;</span>,</span><br><span class="line">              <span class="string">&quot;Images (*.png *.jpg);;Text files (*.txt)&quot;</span>);</span><br><span class="line">    QString names;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;fileNames.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        names += fileNames.<span class="built_in">at</span>(i) + <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;打开文件(s)&quot;</span>, <span class="string">&quot;您选择的文件是: &quot;</span> + names);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对话框效果如下:</li>
</ul>
<p><img src="/img/9.57.png" alt="在这里插入图片描述"></p>
<ul>
<li>打开保存文件对话框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_filedlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString fileName = QFileDialog::<span class="built_in">getSaveFileName</span>(<span class="keyword">this</span>, <span class="string">&quot;保存文件&quot;</span>, <span class="string">&quot;e:\\temp&quot;</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;保存文件&quot;</span>, <span class="string">&quot;您指定的保存数据的文件是: &quot;</span> + fileName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对话框效果如下:</p>
<p><img src="/img/9.58.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="1-3-3-QFontDialog"><a href="#1-3-3-QFontDialog" class="headerlink" title="1.3.3 QFontDialog"></a>1.3.3 QFontDialog</h3><blockquote>
<p><code>QFontDialog</code>类是<code>QDialog</code>的子类<br>通过这个类我们可以得到一个进行字体属性设置的对话框窗口<br>和前边介绍的对话框类一样,只需调用这个类的静态成员函数就可以得到想要的窗口了。</p>
</blockquote>
<h4 id="1-3-3-1-QFont-字体类"><a href="#1-3-3-1-QFont-字体类" class="headerlink" title="1.3.3.1 QFont 字体类"></a>1.3.3.1 QFont 字体类</h4><blockquote>
<p>关于字体的属性信息, 在QT框架中被封装到了一个叫<code>QFont</code>的类中</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">  QFont::<span class="built_in">QFont</span>();</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  参数:</span></span><br><span class="line"><span class="comment">    - family: 本地字库中的字体名, 通过 office 等文件软件可以查看</span></span><br><span class="line"><span class="comment">    - pointSize: 字体的字号</span></span><br><span class="line"><span class="comment">    - weight: 字体的粗细, 有效范围为 0 ~ 99</span></span><br><span class="line"><span class="comment">    - italic: 字体是否倾斜显示, 默认不倾斜</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  QFont::<span class="built_in">QFont</span>(<span class="type">const</span> QString &amp;family, <span class="type">int</span> pointSize = <span class="number">-1</span>, <span class="type">int</span> weight = <span class="number">-1</span>, <span class="type">bool</span> italic = <span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 设置字体</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setFamily</span><span class="params">(<span class="type">const</span> QString &amp;family)</span></span>;</span><br><span class="line">  <span class="comment">// 根据字号设置字体大小</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setPointSize</span><span class="params">(<span class="type">int</span> pointSize)</span></span>;</span><br><span class="line">  <span class="comment">// 根据像素设置字体大小</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setPixelSize</span><span class="params">(<span class="type">int</span> pixelSize)</span></span>;</span><br><span class="line">  <span class="comment">// 设置字体的粗细程度, 有效范围: 0 ~ 99</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setWeight</span><span class="params">(<span class="type">int</span> weight)</span></span>;</span><br><span class="line">  <span class="comment">// 设置字体是否加粗显示</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setBold</span><span class="params">(<span class="type">bool</span> enable)</span></span>;</span><br><span class="line">  <span class="comment">// 设置字体是否要倾斜显示</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">QFont::setItalic</span><span class="params">(<span class="type">bool</span> enable)</span></span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 获取字体相关属性(一般规律: 去掉设置函数的 set 就是获取相关属性对应的函数名)</span></span><br><span class="line">  <span class="function">QString <span class="title">QFont::family</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">QFont::italic</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">QFont::pixelSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">QFont::pointSize</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">QFont::bold</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">QFont::weight</span><span class="params">()</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果一个QFont对象被创建, 并且进行了初始化, 我们可以将这个属性设置给某个窗口, 或者设置给当前应用程序对象。</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// QWidget 类</span></span><br><span class="line"><span class="comment">// 得到当前窗口使用的字体</span></span><br><span class="line"><span class="function"><span class="type">const</span> QWidget::QFont&amp; <span class="title">font</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 给当前窗口设置字体, 只对当前窗口类生效</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setFont</span><span class="params">(<span class="type">const</span> QFont &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// QApplication 类</span></span><br><span class="line"><span class="comment">// 得到当前应用程序对象使用的字体</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QFont <span class="title">QApplication::font</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 给当前应用程序对象设置字体, 作用于当前应用程序的所有窗口</span></span><br><span class="line">[<span class="type">static</span>] <span class="function"><span class="type">void</span> <span class="title">QApplication::setFont</span><span class="params">(<span class="type">const</span> QFont &amp;font, <span class="type">const</span> <span class="type">char</span> *className = <span class="literal">nullptr</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-3-2-QFontDialog类的静态API"><a href="#1-3-3-2-QFontDialog类的静态API" class="headerlink" title="1.3.3.2 QFontDialog类的静态API"></a>1.3.3.2 QFontDialog类的静态API</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否获得了有效字体信息, 指定一个布尔类型变量地址</span></span><br><span class="line"><span class="comment">  - initial: 字体对话框中默认选中并显示该字体信息, 用于对话框的初始化</span></span><br><span class="line"><span class="comment">  - parent: 字体对话框窗口的父对象</span></span><br><span class="line"><span class="comment">  - title: 字体对话框的窗口标题</span></span><br><span class="line"><span class="comment">  - options: 字体对话框选项, 使用默认属性即可, 一般不设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  [<span class="type">static</span>] <span class="function">QFont <span class="title">QFontDialog::getFont</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">		<span class="type">bool</span> *ok, <span class="type">const</span> QFont &amp;initial, </span></span></span><br><span class="line"><span class="params"><span class="function">		QWidget *parent = <span class="literal">nullptr</span>, <span class="type">const</span> QString &amp;title = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">		QFontDialog::FontDialogOptions options = FontDialogOptions())</span></span>;</span><br><span class="line">  </span><br><span class="line">  [<span class="type">static</span>] <span class="function">QFont <span class="title">QFontDialog::getFont</span><span class="params">(<span class="type">bool</span> *ok, QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-3-3-测试代码"><a href="#1-3-3-3-测试代码" class="headerlink" title="1.3.3.3 测试代码"></a>1.3.3.3 测试代码</h4><blockquote>
<p>通过字体对话框选择字体, 并将选择的字体设置给当前窗口</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_fontdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1</span></span><br><span class="line">    <span class="comment">// 方式1</span></span><br><span class="line">    <span class="type">bool</span> ok;</span><br><span class="line">    QFont ft = QFontDialog::<span class="built_in">getFont</span>(</span><br><span class="line">                &amp;ok, <span class="built_in">QFont</span>(<span class="string">&quot;微软雅黑&quot;</span>, <span class="number">12</span>, QFont::Bold), <span class="keyword">this</span>, <span class="string">&quot;选择字体&quot;</span>);</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;ok value is: &quot;</span> &lt;&lt; ok;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="comment">// 方式2</span></span><br><span class="line">    QFont ft = QFontDialog::<span class="built_in">getFont</span>(<span class="literal">NULL</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="comment">// 将选择的字体设置给当前窗口对象</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">setFont</span>(ft);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>字体对话框效果展示:<br><img src="/img/9.59.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="1-3-4-QColorDialog"><a href="#1-3-4-QColorDialog" class="headerlink" title="1.3.4 QColorDialog"></a>1.3.4 QColorDialog</h3><blockquote>
<p><code>QColorDialog</code>类是<code>QDialog</code>的子类<br> 通过这个类我们可以得到一个选择颜色的对话框窗口<br> 和前边介绍的对话框类一样,只需调用这个类的静态成员函数就可以得到想要的窗口了。</p>
</blockquote>
<h4 id="1-3-4-1-颜色类-QColor"><a href="#1-3-4-1-颜色类-QColor" class="headerlink" title="1.3.4.1 颜色类 QColor"></a>1.3.4.1 颜色类 QColor</h4><blockquote>
<p>关于颜色的属性信息, 在QT框架中被封装到了一个叫<code>QColor</code>的类中<br>各种颜色都是基于红, 绿, 蓝这三种颜色调配而成的, 并且颜色还可以进行透明度设置, 默认是不透明的。</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">QColor::<span class="built_in">QColor</span>(Qt::GlobalColor color);</span><br><span class="line">QColor::<span class="built_in">QColor</span>(<span class="type">int</span> r, <span class="type">int</span> g, <span class="type">int</span> b, <span class="type">int</span> a = ...);</span><br><span class="line">QColor::<span class="built_in">QColor</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数设置 red, green, blue, alpha, 取值范围都是 0-255</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::setRed</span><span class="params">(<span class="type">int</span> red)</span></span>;		<span class="comment">// 红色</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::setGreen</span><span class="params">(<span class="type">int</span> green)</span></span>;	<span class="comment">// 绿色</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::setBlue</span><span class="params">(<span class="type">int</span> blue)</span></span>;	<span class="comment">// 蓝色</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::setAlpha</span><span class="params">(<span class="type">int</span> alpha)</span></span>;	<span class="comment">// 透明度, 默认不透明(255)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::setRgb</span><span class="params">(<span class="type">int</span> r, <span class="type">int</span> g, <span class="type">int</span> b, <span class="type">int</span> a = <span class="number">255</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QColor::red</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QColor::green</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QColor::blue</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QColor::alpha</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QColor::getRgb</span><span class="params">(<span class="type">int</span> *r, <span class="type">int</span> *g, <span class="type">int</span> *b, <span class="type">int</span> *a = <span class="literal">nullptr</span>)</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-4-2-静态API函数"><a href="#1-3-4-2-静态API函数" class="headerlink" title="1.3.4.2 静态API函数"></a>1.3.4.2 静态API函数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 弹出颜色选择对话框, 并返回选中的颜色信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">    - initial: 对话框中默认选中的颜色, 用于窗口初始化</span></span><br><span class="line"><span class="comment">    - parent: 给对话框窗口指定父对象</span></span><br><span class="line"><span class="comment">    - title: 对话框窗口的标题</span></span><br><span class="line"><span class="comment">    - options: 颜色对话框窗口选项, 使用默认属性即可, 一般不需要设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  [<span class="type">static</span>] <span class="function">QColor <span class="title">QColorDialog::getColor</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">		<span class="type">const</span> QColor &amp;initial = Qt::white, </span></span></span><br><span class="line"><span class="params"><span class="function">		QWidget *parent = <span class="literal">nullptr</span>, <span class="type">const</span> QString &amp;title = QString(), </span></span></span><br><span class="line"><span class="params"><span class="function">		QColorDialog::ColorDialogOptions options = ColorDialogOptions())</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-4-3-测试代码"><a href="#1-3-4-3-测试代码" class="headerlink" title="1.3.4.3 测试代码"></a>1.3.4.3 测试代码</h4><blockquote>
<p>场景描述:<br>    1. 在窗口上放一个标签控件<br>    2. 通过颜色对话框选择一个颜色, 将选中的颜色显示到标签控件上<br>    3. 将选中的颜色的 RGBA 值分别显示出来</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_colordlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QColor color = QColorDialog::<span class="built_in">getColor</span>();</span><br><span class="line">    <span class="function">QBrush <span class="title">brush</span><span class="params">(color)</span></span>;</span><br><span class="line">    <span class="function">QRect <span class="title">rect</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, ui-&gt;color-&gt;width(), ui-&gt;color-&gt;height())</span></span>;</span><br><span class="line">    <span class="function">QPixmap <span class="title">pix</span><span class="params">(rect.width(), rect.height())</span></span>;</span><br><span class="line">    <span class="function">QPainter <span class="title">p</span><span class="params">(&amp;pix)</span></span>;</span><br><span class="line">    p.<span class="built_in">fillRect</span>(rect, brush);</span><br><span class="line">    ui-&gt;color-&gt;<span class="built_in">setPixmap</span>(pix);</span><br><span class="line">    QString text = <span class="built_in">QString</span>(<span class="string">&quot;red: %1, green: %2, blue: %3, 透明度: %4&quot;</span>)</span><br><span class="line">            .<span class="built_in">arg</span>(color.<span class="built_in">red</span>()).<span class="built_in">arg</span>(color.<span class="built_in">green</span>()).<span class="built_in">arg</span>(color.<span class="built_in">blue</span>()).<span class="built_in">arg</span>(color.<span class="built_in">alpha</span>());</span><br><span class="line">    ui-&gt;colorlabel-&gt;<span class="built_in">setText</span>(text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>颜色对话框窗口效果展示</p>
<p><img src="/img/9.60.png" alt="在这里插入图片描述"></p>
<p>测试代码效果展示<br><img src="/img/9.61.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="1-3-5-QInputDialog"><a href="#1-3-5-QInputDialog" class="headerlink" title="1.3.5 QInputDialog"></a>1.3.5 QInputDialog</h3><blockquote>
<p><code>QInputDialog</code>类是<code>QDialog</code>的子类, 通过这个类我们可以得到一个输入对话框窗口<br>根据实际需求我们可以在这个输入窗口中输入整形, 浮点型, 字符串类型的数据<br>并且还可以显示下拉菜单供使用者选择。<br>和前边介绍的对话框类一样, 只需调用这个类的静态成员函数就可以得到想要的窗口了。</p>
</blockquote>
<h4 id="1-3-5-1-API-静态函数"><a href="#1-3-5-1-API-静态函数" class="headerlink" title="1.3.5.1 API - 静态函数"></a>1.3.5.1 API - 静态函数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 得到一个可以输入浮点数的对话框窗口, 返回对话框窗口中输入的浮点数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - parent: 对话框窗口的父窗口</span></span><br><span class="line"><span class="comment">  - title: 对话框窗口显示的标题信息</span></span><br><span class="line"><span class="comment">  - label: 对话框窗口中显示的文本信息(用于描述对话框的功能)</span></span><br><span class="line"><span class="comment">  - value: 对话框窗口中显示的浮点值, 默认为 0</span></span><br><span class="line"><span class="comment">  - min: 对话框窗口支持显示的最小数值</span></span><br><span class="line"><span class="comment">  - max: 对话框窗口支持显示的最大数值</span></span><br><span class="line"><span class="comment">  - decimals: 浮点数的精度, 默认保留小数点以后1位</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否得到了有效数据, 一般不会使用该参数</span></span><br><span class="line"><span class="comment">  - flags: 对话框窗口的窗口属性, 使用默认值即可</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="type">static</span>] <span class="function"><span class="type">double</span> <span class="title">QInputDialog::getDouble</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">const</span> QString &amp;label, <span class="type">double</span> value = <span class="number">0</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">double</span> min = <span class="number">-2147483647</span>, <span class="type">double</span> max = <span class="number">2147483647</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">int</span> decimals = <span class="number">1</span>, <span class="type">bool</span> *ok = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::WindowFlags flags = Qt::WindowFlags())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到一个可以输入整形数的对话框窗口, 返回对话框窗口中输入的整形数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - parent: 对话框窗口的父窗口</span></span><br><span class="line"><span class="comment">  - title: 对话框窗口显示的标题信息</span></span><br><span class="line"><span class="comment">  - label: 对话框窗口中显示的文本信息(用于描述对话框的功能)</span></span><br><span class="line"><span class="comment">  - value: 对话框窗口中显示的整形值, 默认为 0</span></span><br><span class="line"><span class="comment">  - min: 对话框窗口支持显示的最小数值</span></span><br><span class="line"><span class="comment">  - max: 对话框窗口支持显示的最大数值</span></span><br><span class="line"><span class="comment">  - step: 步长, 通过对话框提供的按钮调节数值每次增长/递减的量</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否得到了有效数据, 一般不会使用该参数</span></span><br><span class="line"><span class="comment">  - flags: 对话框窗口的窗口属性, 使用默认值即可</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="type">static</span>] <span class="function"><span class="type">int</span> <span class="title">QInputDialog::getInt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">const</span> QString &amp;label, <span class="type">int</span> value = <span class="number">0</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">int</span> min = <span class="number">-2147483647</span>, <span class="type">int</span> max = <span class="number">2147483647</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">int</span> step = <span class="number">1</span>, <span class="type">bool</span> *ok = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::WindowFlags flags = Qt::WindowFlags())</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到一个带下来菜单的对话框窗口, 返回选择的菜单项上边的文本信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - parent: 对话框窗口的父窗口</span></span><br><span class="line"><span class="comment">  - title: 对话框窗口显示的标题信息</span></span><br><span class="line"><span class="comment">  - label: 对话框窗口中显示的文本信息(用于描述对话框的功能)</span></span><br><span class="line"><span class="comment">  - items: 字符串列表, 用于初始化窗口中的下拉菜单, 每个字符串对应一个菜单项</span></span><br><span class="line"><span class="comment">  - current: 通过菜单项的索引指定显示下拉菜单中的哪个菜单项, 默认显示第一个(编号为0)</span></span><br><span class="line"><span class="comment">  - editable: 设置菜单项上的文本信息是否可以进行编辑, 默认为true, 即可以编辑</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否得到了有效数据, 一般不会使用该参数</span></span><br><span class="line"><span class="comment">  - flags: 对话框窗口的窗口属性, 使用默认值即可</span></span><br><span class="line"><span class="comment">  - inputMethodHints: 设置显示模式, 默认没有指定任何特殊显示格式, 显示普通文本字符串</span></span><br><span class="line"><span class="comment">    - 如果有特殊需求, 可以参数帮助文档进行相关设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QInputDialog::getItem</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		QWidget *parent, <span class="type">const</span> QString &amp;title, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">const</span> QString &amp;label, <span class="type">const</span> QStringList &amp;items, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">int</span> current = <span class="number">0</span>, <span class="type">bool</span> editable = <span class="literal">true</span>, <span class="type">bool</span> *ok = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::WindowFlags flags = Qt::WindowFlags(), </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::InputMethodHints inputMethodHints = Qt::ImhNone)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到一个可以输入多行数据的对话框窗口, 返回用户在窗口中输入的文本信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - parent: 对话框窗口的父窗口</span></span><br><span class="line"><span class="comment">  - title: 对话框窗口显示的标题信息</span></span><br><span class="line"><span class="comment">  - label: 对话框窗口中显示的文本信息(用于描述对话框的功能)</span></span><br><span class="line"><span class="comment">  - text: 指定显示到多行输入框中的文本信息, 默认是空字符串</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否得到了有效数据, 一般不会使用该参数</span></span><br><span class="line"><span class="comment">  - flags: 对话框窗口的窗口属性, 使用默认值即可</span></span><br><span class="line"><span class="comment">  - inputMethodHints: 设置显示模式, 默认没有指定任何特殊显示格式, 显示普通文本字符串</span></span><br><span class="line"><span class="comment">    - 如果有特殊需求, 可以参数帮助文档进行相关设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QInputDialog::getMultiLineText</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		QWidget *parent, <span class="type">const</span> QString &amp;title, <span class="type">const</span> QString &amp;label, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">const</span> QString &amp;text = QString(), <span class="type">bool</span> *ok = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::WindowFlags flags = Qt::WindowFlags(), </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::InputMethodHints inputMethodHints = Qt::ImhNone)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到一个可以输入单行信息的对话框窗口, 返回用户在窗口中输入的文本信息</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - parent: 对话框窗口的父窗口 </span></span><br><span class="line"><span class="comment">  - title: 对话框窗口显示的标题信息</span></span><br><span class="line"><span class="comment">  - label: 对话框窗口中显示的文本信息(用于描述对话框的功能)</span></span><br><span class="line"><span class="comment">  - mode: 指定单行编辑框中数据的反馈模式, 是一个 QLineEdit::EchoMode 类型的枚举值</span></span><br><span class="line"><span class="comment">    - QLineEdit::Normal: 显示输入的字符。这是默认值</span></span><br><span class="line"><span class="comment">    - QLineEdit::NoEcho: 不要展示任何东西。这可能适用于连密码长度都应该保密的密码。</span></span><br><span class="line"><span class="comment">    - QLineEdit::Password: 显示与平台相关的密码掩码字符，而不是实际输入的字符。</span></span><br><span class="line"><span class="comment">    - QLineEdit::PasswordEchoOnEdit: 在编辑时按输入显示字符，否则按密码显示字符。</span></span><br><span class="line"><span class="comment">  - text: 指定显示到单行输入框中的文本信息, 默认是空字符串</span></span><br><span class="line"><span class="comment">  - ok: 传出参数, 用于判断是否得到了有效数据, 一般不会使用该参数</span></span><br><span class="line"><span class="comment">  - flags: 对话框窗口的窗口属性, 使用默认值即可</span></span><br><span class="line"><span class="comment">  - inputMethodHints: 设置显示模式, 默认没有指定任何特殊显示格式, 显示普通文本字符串</span></span><br><span class="line"><span class="comment">     - 如果有特殊需求, 可以参数帮助文档进行相关设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">[<span class="type">static</span>] <span class="function">QString <span class="title">QInputDialog::getText</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    		QWidget *parent, <span class="type">const</span> QString &amp;title, <span class="type">const</span> QString &amp;label,</span></span></span><br><span class="line"><span class="params"><span class="function">    		QLineEdit::EchoMode mode = QLineEdit::Normal, </span></span></span><br><span class="line"><span class="params"><span class="function">    		<span class="type">const</span> QString &amp;text = QString(), <span class="type">bool</span> *ok = <span class="literal">nullptr</span>, </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::WindowFlags flags = Qt::WindowFlags(), </span></span></span><br><span class="line"><span class="params"><span class="function">    		Qt::InputMethodHints inputMethodHints = Qt::ImhNone)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-5-2-测试代码"><a href="#1-3-5-2-测试代码" class="headerlink" title="1.3.5.2 测试代码"></a>1.3.5.2 测试代码</h4><ul>
<li>整形输入框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_inputdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ret = QInputDialog::<span class="built_in">getInt</span>(<span class="keyword">this</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;您的当前年龄: &quot;</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">2</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;您的当前年龄: &quot;</span> + QString::<span class="built_in">number</span>(ret));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>窗口效果展示:</li>
</ul>
<p><img src="/img/9.62.png" alt="在这里插入图片描述"></p>
<ul>
<li>浮点型输入框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_inputdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">double</span> ret = QInputDialog::<span class="built_in">getDouble</span>(<span class="keyword">this</span>, <span class="string">&quot;工资&quot;</span>, <span class="string">&quot;您的工资: &quot;</span>, <span class="number">2000</span>, <span class="number">1000</span>, <span class="number">6000</span>, <span class="number">2</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;工资&quot;</span>, <span class="string">&quot;您的当前工资: &quot;</span> + QString::<span class="built_in">number</span>(ret));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>窗口效果展示:</li>
</ul>
<p><img src="/img/9.63.png" alt="在这里插入图片描述"></p>
<ul>
<li>带下拉菜单的输入框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_inputdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QStringList items;</span><br><span class="line">    items &lt;&lt; <span class="string">&quot;苹果&quot;</span> &lt;&lt; <span class="string">&quot;橙子&quot;</span> &lt;&lt; <span class="string">&quot;橘子&quot;</span> &lt;&lt; <span class="string">&quot;葡萄&quot;</span> &lt;&lt; <span class="string">&quot;香蕉&quot;</span> &lt;&lt; <span class="string">&quot;哈密瓜&quot;</span>;</span><br><span class="line">    QString item = QInputDialog::<span class="built_in">getItem</span>(<span class="keyword">this</span>, <span class="string">&quot;请选择你喜欢的水果&quot;</span>, <span class="string">&quot;你最喜欢的水果:&quot;</span>, items, <span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;水果&quot;</span>, <span class="string">&quot;您最喜欢的水果是: &quot;</span> + item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>窗口效果展示:</li>
</ul>
<p><img src="/img/9.64.png" alt="在这里插入图片描述"></p>
<ul>
<li>多行字符串输入框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_inputdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString info = QInputDialog::<span class="built_in">getMultiLineText</span>(<span class="keyword">this</span>, <span class="string">&quot;表白&quot;</span>, <span class="string">&quot;您最想对漂亮小姐姐说什么呢?&quot;</span>, <span class="string">&quot;呦吼吼...&quot;</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;知心姐姐&quot;</span>, <span class="string">&quot;您最想对小姐姐说: &quot;</span> + info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>窗口效果展示:<br><img src="/img/9.65.png" alt="在这里插入图片描述"></p>
<ul>
<li>单行字符串输入框</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_inputdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString text = QInputDialog::<span class="built_in">getText</span>(<span class="keyword">this</span>, <span class="string">&quot;密码&quot;</span>, <span class="string">&quot;请输入新的密码&quot;</span>, QLineEdit::Password, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;密码&quot;</span>, <span class="string">&quot;您设置的密码是: &quot;</span> + text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>窗口效果展示:</p>
<p><img src="/img/9.66.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="1-3-6-QProgressDialog"><a href="#1-3-6-QProgressDialog" class="headerlink" title="1.3.6 QProgressDialog"></a>1.3.6 QProgressDialog</h3><blockquote>
<p><code>QProgressDialog</code>类是<code>QDialog</code>的子类, 通过这个类我们可以得到一个带进度条的对话框窗口<br>这种类型的对话框窗口一般常用于文件拷贝、数据传输等实时交互的场景中。</p>
</blockquote>
<h4 id="1-3-6-1-常用API"><a href="#1-3-6-1-常用API" class="headerlink" title="1.3.6.1 常用API"></a>1.3.6.1 常用API</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">  - labelText: 对话框中显示的提示信息</span></span><br><span class="line"><span class="comment">  - cancelButtonText: 取消按钮上显示的文本信息</span></span><br><span class="line"><span class="comment">  - minimum: 进度条最小值</span></span><br><span class="line"><span class="comment">  - maximum: 进度条最大值</span></span><br><span class="line"><span class="comment">  - parent: 当前窗口的父对象</span></span><br><span class="line"><span class="comment">  - f: 当前进度窗口的flag属性, 使用默认属性即可, 无需设置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">QProgressDialog::<span class="built_in">QProgressDialog</span>(</span><br><span class="line">	QWidget *parent = <span class="literal">nullptr</span>, </span><br><span class="line">	Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>());</span><br><span class="line"></span><br><span class="line">QProgressDialog::<span class="built_in">QProgressDialog</span>(</span><br><span class="line">	<span class="type">const</span> QString &amp;labelText, <span class="type">const</span> QString &amp;cancelButtonText, </span><br><span class="line">	<span class="type">int</span> minimum, <span class="type">int</span> maximum, QWidget *parent = <span class="literal">nullptr</span>,</span><br><span class="line">	Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置取消按钮显示的文本信息</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setCancelButtonText</span><span class="params">(<span class="type">const</span> QString &amp;cancelButtonText)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共成员函数和槽函数</span></span><br><span class="line"><span class="function">QString <span class="title">QProgressDialog::labelText</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setLabelText</span><span class="params">(<span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到进度条最小值</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QProgressDialog::minimum</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置进度条最小值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setMinimum</span><span class="params">(<span class="type">int</span> minimum)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到进度条最大值</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QProgressDialog::maximum</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置进度条最大值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setMaximum</span><span class="params">(<span class="type">int</span> maximum)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置进度条范围(最大和最小值)</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setRange</span><span class="params">(<span class="type">int</span> minimum, <span class="type">int</span> maximum)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到进度条当前的值</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">QProgressDialog::value</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 设置进度条当前的值</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setValue</span><span class="params">(<span class="type">int</span> progress)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QProgressDialog::autoReset</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 当value() = maximum()时，进程对话框是否调用reset()，此属性默认为true。</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setAutoReset</span><span class="params">(<span class="type">bool</span> reset)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QProgressDialog::autoClose</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"><span class="comment">// 当value() = maximum()时，进程对话框是否调用reset()并且隐藏，此属性默认为true。</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QProgressDialog::setAutoClose</span><span class="params">(<span class="type">bool</span> close)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断用户是否按下了取消键, 按下了返回true, 否则返回false</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">wasCanceled</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置进度条</span></span><br><span class="line"><span class="comment">// 重置进度对话框。wascancelled()变为true，直到进程对话框被重置。进度对话框被隐藏。</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QProgressDialog::cancel</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 重置进度对话框。如果autoClose()为真，进程对话框将隐藏。</span></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QProgressDialog::reset</span><span class="params">()</span></span>;   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 信号</span></span><br><span class="line"><span class="comment">// 当单击cancel按钮时，将发出此信号。默认情况下，它连接到cancel()槽。</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QProgressDialog::canceled</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置窗口的显示状态(模态, 非模态)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数:</span></span><br><span class="line"><span class="comment">	Qt::NonModal  -&gt; 非模态</span></span><br><span class="line"><span class="comment">	Qt::WindowModal	-&gt; 模态, 阻塞父窗口</span></span><br><span class="line"><span class="comment">	Qt::ApplicationModal -&gt; 模态, 阻塞应用程序中的所有窗口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setWindowModality</span><span class="params">(Qt::WindowModality windowModality)</span></span>;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-3-6-2-测试代码"><a href="#1-3-6-2-测试代码" class="headerlink" title="1.3.6.2 测试代码"></a>1.3.6.2 测试代码</h4><blockquote>
<p>场景描述:<br>    1. 基于定时器模拟文件拷贝的场景<br>    2. 点击窗口按钮, 进度条窗口显示, 同时启动定时器<br>    3. 通过定时器信号, 按照固定频率更新对话框窗口进度条<br>    4. 当进度条当前值 &#x3D;&#x3D; 最大值, 关闭定时器, 关闭并析构进度对话框</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_progressdlg_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1. 创建进度条对话框窗口对象</span></span><br><span class="line">    QProgressDialog *progress = <span class="keyword">new</span> <span class="built_in">QProgressDialog</span>(</span><br><span class="line">                <span class="string">&quot;正在拷贝数据...&quot;</span>, <span class="string">&quot;取消拷贝&quot;</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">// 2. 初始化并显示进度条窗口</span></span><br><span class="line">    progress-&gt;<span class="built_in">setWindowTitle</span>(<span class="string">&quot;请稍后&quot;</span>);</span><br><span class="line">    progress-&gt;<span class="built_in">setWindowModality</span>(Qt::WindowModal);</span><br><span class="line">    progress-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 更新进度条</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">    QTimer *timer = <span class="keyword">new</span> QTimer;</span><br><span class="line">    <span class="built_in">connect</span>(timer, &amp;QTimer::timeout, <span class="keyword">this</span>, [=]()</span><br><span class="line">    &#123;</span><br><span class="line">         progress-&gt;<span class="built_in">setValue</span>(value);</span><br><span class="line">         value++;</span><br><span class="line">         <span class="comment">// 当value &gt; 最大值的时候</span></span><br><span class="line">         <span class="keyword">if</span>(value &gt; progress-&gt;<span class="built_in">maximum</span>())</span><br><span class="line">         &#123;</span><br><span class="line">             timer-&gt;<span class="built_in">stop</span>();</span><br><span class="line">             value = <span class="number">0</span>;</span><br><span class="line">             <span class="keyword">delete</span> progress;</span><br><span class="line">             <span class="keyword">delete</span> timer;</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">connect</span>(progress, &amp;QProgressDialog::canceled, <span class="keyword">this</span>, [=]()</span><br><span class="line">    &#123;</span><br><span class="line">        timer-&gt;<span class="built_in">stop</span>();</span><br><span class="line">        value = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">delete</span> progress;</span><br><span class="line">        <span class="keyword">delete</span> timer;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    timer-&gt;<span class="built_in">start</span>(<span class="number">50</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>进度窗口效果展示:<br><img src="/img/9.67.png" alt="在这里插入图片描述"></p>
</blockquote>
<hr>
<h2 id="1-4-QMainWindow"><a href="#1-4-QMainWindow" class="headerlink" title="1.4 QMainWindow"></a>1.4 QMainWindow</h2><blockquote>
<p>QMainWindow是标准基础窗口中结构最复杂的窗口, 其组成如下:</p>
<ul>
<li>提供了<code>菜单栏, 工具栏, 状态栏, 停靠窗口</code></li>
<li>菜单栏: 只能有一个, 位于窗口的最上方 </li>
<li>工具栏: 可以有多个, 默认提供了一个,窗口的上下左右都可以停靠 </li>
<li>状态栏: 只能有一个, 位于窗口最下方 </li>
<li>停靠窗口: 可以有多个, 默认没有提供, 窗口的上下左右都可以停靠</li>
</ul>
</blockquote>
<p><img src="/img/9.68.png" alt="在这里插入图片描述"></p>
<h3 id="1-4-1-菜单栏"><a href="#1-4-1-菜单栏" class="headerlink" title="1.4.1 菜单栏"></a>1.4.1 菜单栏</h3><ul>
<li>添加菜单项</li>
</ul>
<blockquote>
<p>关于顶级菜单可以直接在UI窗口中双击, 直接输入文本信息即可, 对应子菜单项也可以通过先双击在输入的方式完成添加,但是这种方式<code>不支持中文的输入</code>。</p>
</blockquote>
<p><img src="/img/9.69.png" alt="在这里插入图片描述"></p>
<ul>
<li>常用的添加方式</li>
</ul>
<blockquote>
<p>一般情况下, 我们都是先在外面创建出QAction对象, 然后再将其拖拽到某个菜单下边, 这样子菜单项的添加就完成了。</p>
</blockquote>
<p><img src="/img/9.70.png" alt="在这里插入图片描述"></p>
<ul>
<li>通过代码的方式添加菜单或者菜单项</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给菜单栏添加菜单</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenuBar::addMenu</span><span class="params">(QMenu *menu)</span></span>;</span><br><span class="line"><span class="function">QMenu *<span class="title">QMenuBar::addMenu</span><span class="params">(<span class="type">const</span> QString &amp;title)</span></span>;</span><br><span class="line"><span class="function">QMenu *<span class="title">QMenuBar::addMenu</span><span class="params">(<span class="type">const</span> QIcon &amp;icon, <span class="type">const</span> QString &amp;title)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给菜单对象添加菜单项(QAction)</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::addAction</span><span class="params">(<span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::addAction</span><span class="params">(<span class="type">const</span> QIcon &amp;icon, <span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加分割线</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::addSeparator</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>菜单项 QAction 事件的处理</li>
</ul>
<p><strong>单击菜单项, 该对象会发出一个信号</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击QAction对象发出该信号</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QAction::triggered</span><span class="params">(<span class="type">bool</span> checked = <span class="literal">false</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>示例代码</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// save_action 是某个菜单项对象名, 点击这个菜单项会弹出一个对话框</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;save_action, &amp;QAction::triggered, <span class="keyword">this</span>, [=]()</span><br><span class="line">&#123;</span><br><span class="line">      QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;Triggered&quot;</span>, <span class="string">&quot;我是菜单项, 你不要调戏我...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-4-2-工具栏"><a href="#1-4-2-工具栏" class="headerlink" title="1.4.2 工具栏"></a>1.4.2 工具栏</h3><h4 id="1-4-2-1-添加工具按钮"><a href="#1-4-2-1-添加工具按钮" class="headerlink" title="1.4.2.1 添加工具按钮"></a>1.4.2.1 添加工具按钮</h4><blockquote>
<p>窗口中的工具栏我们经常见到, 并不会为此感到陌生, 如何往工具栏中添加工具按钮?<br>一共有两种方式</p>
</blockquote>
<ul>
<li><p>方式1：先创建QAction对象, 然后拖拽到工具栏中, 和添加菜单项的方式相同<br><img src="/img/9.71.png" alt="在这里插入图片描述"></p>
</li>
<li><p>方式2：如果不通过UI界面直接操作，那么就需要调用相关的API函数了</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在QMainWindow窗口中添加工具栏</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QMainWindow::addToolBar</span><span class="params">(Qt::ToolBarArea area, QToolBar *toolbar)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QMainWindow::addToolBar</span><span class="params">(QToolBar *toolbar)</span></span>;</span><br><span class="line"><span class="function">QToolBar *<span class="title">QMainWindow::addToolBar</span><span class="params">(<span class="type">const</span> QString &amp;title)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将Qt控件放到工具栏中</span></span><br><span class="line"><span class="comment">// 工具栏类: QToolBar</span></span><br><span class="line"><span class="comment">// 添加的对象只要是QWidget或者启子类都可以被添加</span></span><br><span class="line"><span class="function">QAction *<span class="title">QToolBar::addWidget</span><span class="params">(QWidget *widget)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加QAction对象</span></span><br><span class="line"><span class="function">QAction *<span class="title">QToolBar::addAction</span><span class="params">(<span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"><span class="function">QAction *<span class="title">QToolBar::addAction</span><span class="params">(<span class="type">const</span> QIcon &amp;icon, <span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加分隔线</span></span><br><span class="line"><span class="function">QAction *<span class="title">QToolBar::addSeparator</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>

<p><strong>通过代码的方式对工具栏进行操作</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加第二个工具栏</span></span><br><span class="line">    QToolBar* toolbar = <span class="keyword">new</span> <span class="built_in">QToolBar</span>(<span class="string">&quot;toolbar&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">addToolBar</span>(Qt::LeftToolBarArea, toolbar);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给工具栏添加按钮和单行输入框</span></span><br><span class="line">    ui-&gt;toolBar-&gt;<span class="built_in">addWidget</span>(<span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;搜索&quot;</span>));</span><br><span class="line">    QLineEdit* edit = <span class="keyword">new</span> QLineEdit;</span><br><span class="line">    edit-&gt;<span class="built_in">setMaximumWidth</span>(<span class="number">200</span>);</span><br><span class="line">    edit-&gt;<span class="built_in">setFixedWidth</span>(<span class="number">100</span>);</span><br><span class="line">    ui-&gt;toolBar-&gt;<span class="built_in">addWidget</span>(edit);</span><br><span class="line">    <span class="comment">// 添加QAction类型的菜单项</span></span><br><span class="line">    ui-&gt;toolBar-&gt;<span class="built_in">addAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;:/er-dog&quot;</span>), <span class="string">&quot;二狗子&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-4-2-2-工具栏的属性设置"><a href="#1-4-2-2-工具栏的属性设置" class="headerlink" title="1.4.2.2 工具栏的属性设置"></a>1.4.2.2 工具栏的属性设置</h4><blockquote>
<p>在UI窗口的树状列表中, 找到工具栏节点, 就可以得到工具栏的属性设置面板了<br>这样就可根据个人需求对工具栏的属性进行设置和修改了。</p>
</blockquote>
<p><img src="/img/9.72.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>在Qt控件的属性窗口中对应了一些属性, 这些属性大部分都应了一个设置函数</p>
<ul>
<li>在对应的类中函数名叫什么? <ul>
<li>规律: <code>set+属性名 == 函数名</code></li>
</ul>
</li>
<li>某些属性没有对应的函数, 只能在属性窗口中设置</li>
</ul>
</blockquote>
<hr>
<h3 id="1-4-3-状态栏"><a href="#1-4-3-状态栏" class="headerlink" title="1.4.3 状态栏"></a>1.4.3 状态栏</h3><blockquote>
<p>一般情况下, 需要在状态栏中添加某些控件, 显示某些属性, 用最多的就是添加标签 <code>QLabel</code></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型: QStatusBar</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QStatusBar::addWidget</span><span class="params">(QWidget *widget, <span class="type">int</span> stretch = <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QStatusBar::clearMessage</span><span class="params">()</span></span>;</span><br><span class="line">[slot] <span class="function"><span class="type">void</span> <span class="title">QStatusBar::showMessage</span><span class="params">(<span class="type">const</span> QString &amp;message, <span class="type">int</span> timeout = <span class="number">0</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>相关的操作代码</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QMainWindow</span>(parent)</span><br><span class="line">    , <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 状态栏添加子控件</span></span><br><span class="line">    <span class="comment">// 按钮</span></span><br><span class="line">    QPushButton* button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;按钮&quot;</span>);</span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">addWidget</span>(button);</span><br><span class="line">    <span class="comment">// 标签</span></span><br><span class="line">    QLabel* label = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">addWidget</span>(label);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-4-4-停靠窗口"><a href="#1-4-4-停靠窗口" class="headerlink" title="1.4.4 停靠窗口"></a>1.4.4 停靠窗口</h3><blockquote>
<p>停靠窗口可以通过鼠标拖动停靠到窗口的上、下、左、右，或者浮动在窗口上方。<br>如果需要这种类型的窗口必须手动添加<br><code>如果在非QMainWindow类型的窗口中添加了停靠窗口,那么这个窗口是不能移动和浮动的。</code><br> 浮动窗口在工具栏中， 直接将其拖拽到UI界面上即可。</p>
</blockquote>
<p><img src="/img/9.73.png" alt="在这里插入图片描述"></p>
<ul>
<li>停靠窗口也有一个属性面板, 我们可以在其对应属性面板中直接进行设置和修改相关属性。</li>
</ul>
<p><img src="/img/9.74.png" alt="在这里插入图片描述"></p>
<hr>
<h2 id="1-5-资源文件-qrc"><a href="#1-5-资源文件-qrc" class="headerlink" title="1.5 资源文件 .qrc"></a>1.5 资源文件 .qrc</h2><blockquote>
<p>资源文件顾名思义就是一个存储资源的文件，在Qt中引入资源文件好处在于他能提高应用程序的部署效率并且减少一些错误的发生。<br><code>在程序编译过程中，添加到资源文件中的文件也会以二进制的形式被打包到可执行程序中，这样这些资源就永远和可执行程序捆绑到一起了，不会出现加载资源却找不到的问题。</code><br>虽然资源文件优势很明显，但是它也不是万能的，资源文件中一般添加的都是比较小的资源，比如： 图片，配置文件，MP3等，如果是类似视频这类比较大的文件就不适合放到资源文件中了。</p>
</blockquote>
<ul>
<li>比如我们需要给某个窗口设置图标, 代码如下:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建图标对象</span></span><br><span class="line">QIcon::<span class="built_in">QIcon</span>(<span class="type">const</span> QString &amp;fileName);</span><br><span class="line"><span class="comment">// QWidget类的 公共成员函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setWindowIcon</span><span class="params">(<span class="type">const</span> QIcon &amp;icon)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给窗口设置图标</span></span><br><span class="line"><span class="comment">// 弊端: 发布的 exe 必须要加载 d:\\pic\\1.ico 如果当前主机对应的目录中没有图片, 图标就无法被加载</span></span><br><span class="line"><span class="comment">// 发布 exe 需要额外发布图片, 将其部署到某个目录中</span></span><br><span class="line"><span class="built_in">setWindowIcon</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;d:\\pic\\1.ico&quot;</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们可以使用资源文件解决上述的弊端, 这样发布应用程序的时候直接发布exe就可以, 不需要再额外提供图片了。</p>
</blockquote>
<p>介绍一下关于资源文件的创建步骤:</p>
<p><img src="/img/9.75.png" alt="在这里插入图片描述"></p>
<p><img src="/img/9.76.png" alt="在这里插入图片描述"><br><img src="/img/9.77.png" alt="在这里插入图片描述"><br><img src="/img/9.78.png" alt="在这里插入图片描述"></p>
<ul>
<li>资源文件添加完毕之后, 继续给大家介绍资源文件的使用</li>
</ul>
<ol>
<li>使用<code>资源编辑器</code>打开资源文件</li>
</ol>
<p><img src="/img/9.79.png" alt="在这里插入图片描述"></p>
<ol start="2">
<li>给资源添加前缀</li>
</ol>
<blockquote>
<p>一个资源文件中可以添加多个前缀, 前缀就是添加的资源在资源文件中的路径, 前缀根据实际需求制定即可, 路径以<code>/</code>开头</p>
</blockquote>
<p><img src="/img/9.80.png" alt="在这里插入图片描述"></p>
<ol start="3">
<li>添加文件</li>
</ol>
<blockquote>
<p>前缀添加完毕, 就可以在某个前缀下边添加相关的资源了。</p>
</blockquote>
<p><img src="/img/9.81.png" alt="在这里插入图片描述"></p>
<ul>
<li>弹出以文件选择对话框, 选择资源文件<ul>
<li>资源文件放到什么地方?<ul>
<li><code>放到和 项目文件 .pro 同一级目录或者更深的目录中</code></li>
<li><code>错误的做法: 将资源文件放到 .pro文件的上级目录, 这样资源文件无法被加载到</code></li>
</ul>
</li>
</ul>
</li>
<li>可以给添加的资源文件设置别名, 设置别名之后原来的名字就不能使用了</li>
</ul>
<blockquote>
<p>温馨提示:</p>
<ol>
<li>在高版本的QtCreator中, 资源文件名字或者别名不支持中文</li>
<li>如果设置了中文会出现编译会报错</li>
<li>在此只是演示, 使用过程中需要额外注意该问题</li>
</ol>
</blockquote>
<p><img src="/img/9.82.png" alt="在这里插入图片描述"></p>
<ol start="4">
<li>如何在程序中使用资源文件中的图片</li>
</ol>
<blockquote>
<p>将项目树中的资源文件节点展开</p>
</blockquote>
<p><img src="/img/9.83.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>找到需要使用的资源图片节点, 鼠标右键, 弹出的菜单中选择<code>Copy Path ...</code></p>
</blockquote>
<p><img src="/img/9.84.png" alt="在这里插入图片描述"></p>
<hr>
<h2 id="1-6-在Qt窗口中添加右键菜单"><a href="#1-6-在Qt窗口中添加右键菜单" class="headerlink" title="1.6 在Qt窗口中添加右键菜单"></a>1.6 在Qt窗口中添加右键菜单</h2><p>如果想要在某一窗口中显示右键菜单, 其处理方式大体上有两种<br>这两种方式分别为基于<code>鼠标事件实现</code>和<code>基于窗口的菜单策略实现</code>。<br>其中第二种方式中又有三种不同的实现方式<br>因此想要在窗口中显示一个右键菜单共四种实现方式</p>
<h3 id="1-6-1-基于鼠标事件实现"><a href="#1-6-1-基于鼠标事件实现" class="headerlink" title="1.6.1 基于鼠标事件实现"></a>1.6.1 基于鼠标事件实现</h3><h4 id="1-6-1-1-实现思路"><a href="#1-6-1-1-实现思路" class="headerlink" title="1.6.1.1 实现思路"></a>1.6.1.1 实现思路</h4><blockquote>
<p>使用这种方式实现右键菜单的显示需要使用<code>事件处理器函数</code>, 在Qt中这类函数都是回调函数,<br>并且在自定义窗口类中我们还可以自定义事件处理器函数的行为（因为子类继承了父类的这个方法并且这类函数是虚函数）。 </p>
</blockquote>
<p>实现步骤如下：</p>
<ol>
<li>在当前窗口类中重写鼠标操作相关的的事件处理器函数，有两个可以选择</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下两个事件二选一即可, 只是事件函数被调用的时机不同罢了</span></span><br><span class="line"><span class="comment">// 这个时机对右键菜单的显示没有任何影响</span></span><br><span class="line">[<span class="keyword">virtual</span> <span class="keyword">protected</span>] <span class="function"><span class="type">void</span> <span class="title">QWidget::mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line">[<span class="keyword">virtual</span> <span class="keyword">protected</span>] <span class="function"><span class="type">void</span> <span class="title">QWidget::mouseReleaseEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>在数据表事件处理器函数内部判断是否按下了鼠标右键</p>
</li>
<li><p>如果按下了鼠标右键创建菜单对象(也可以提前先创建处理), 并将其显示出来</p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关于QMenu类型的菜单显示需要调用的 API</span></span><br><span class="line"><span class="comment">// 参数 p 就是右键菜单需要显示的位置, 这个坐标需要使用屏幕坐标</span></span><br><span class="line"><span class="comment">// 该位置坐标一般通过调用 QCursor::pos() 直接就可以得到了</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::exec</span><span class="params">(<span class="type">const</span> QPoint &amp;p, QAction *action = <span class="literal">nullptr</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="1-6-1-2-代码实现"><a href="#1-6-1-2-代码实现" class="headerlink" title="1.6.1.2 代码实现"></a>1.6.1.2 代码实现</h4><blockquote>
<p>在头文件中添加要重写的鼠标事件处理器函数声明, 这里使用的是 <code>mousePressEvent()</code></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// 鼠标按下, 该函数被Qt框架调用, 需要重写该函数</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在源文件中重写从父类继承的虚函数<code>mousePressEvent()</code></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 判断用户按下的是哪一个鼠标键</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">button</span>() == Qt::RightButton)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 弹出一个菜单, 菜单项是 QAction 类型</span></span><br><span class="line">        QMenu menu;</span><br><span class="line">        QAction* act = menu.<span class="built_in">addAction</span>(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        <span class="built_in">connect</span>(act, &amp;QAction::triggered, <span class="keyword">this</span>, [=]()</span><br><span class="line">        &#123;</span><br><span class="line">            QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;title&quot;</span>, <span class="string">&quot;您选择的是C++...&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        menu.<span class="built_in">addAction</span>(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        menu.<span class="built_in">addAction</span>(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        menu.<span class="built_in">exec</span>(QCursor::<span class="built_in">pos</span>()); <span class="comment">// 右键菜单被模态显示出来了</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1-6-2-基于窗口的菜单策略实现"><a href="#1-6-2-基于窗口的菜单策略实现" class="headerlink" title="1.6.2 基于窗口的菜单策略实现"></a>1.6.2 基于窗口的菜单策略实现</h3><blockquote>
<p>这种方式是使用 Qt 中 <code>QWidget</code> 类中的右键菜单函数<br><code>QWidget::setContextMenuPolicy(Qt::ContextMenuPolicy policy)</code> 来实现,<br>因为这个函数的参数可以指定不同的值, 因此不同参数对应的具体的实现方式也不同。 </p>
</blockquote>
<p>这个函数的函数原型如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数原型:</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QWidget::setContextMenuPolicy</span><span class="params">(Qt::ContextMenuPolicy policy)</span></span>;</span><br><span class="line">参数: 	</span><br><span class="line">  - Qt::NoContextMenu	     --&gt; 不能实现右键菜单</span><br><span class="line">  - Qt::PreventContextMenu   --&gt; 不能实现右键菜单</span><br><span class="line">  - Qt::DefaultContextMenu   --&gt; 基于事件处理器函数 QWidget::<span class="built_in">contextMenuEvent</span>() 实现</span><br><span class="line">  - Qt::ActionsContextMenu   --&gt; 添加到当前窗口中所有 QAction 都会作为右键菜单项显示出来</span><br><span class="line">  - Qt::CustomContextMenu    --&gt; 基于 QWidget::<span class="built_in">customContextMenuRequested</span>() 信号实现</span><br></pre></td></tr></table></figure>

<h4 id="1-6-2-1-Qt-DefaultContextMenu"><a href="#1-6-2-1-Qt-DefaultContextMenu" class="headerlink" title="1.6.2.1 Qt::DefaultContextMenu"></a>1.6.2.1 Qt::DefaultContextMenu</h4><blockquote>
<p>使用这个策略实现右键菜单, 需要借助窗口类从父类继承的虚函<code>QWidget::contextMenuEvent()</code>并重写它来实现。</p>
</blockquote>
<ul>
<li>第一步是在窗口类的头文件中添加这个函数的声明</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// 如果窗口设置了 Qt::DefaultContextMenu 策略, </span></span><br><span class="line">    <span class="comment">// 点击鼠标右键该函数被Qt框架调用</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">contextMenuEvent</span><span class="params">(QContextMenuEvent *event)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>第二步在这个窗口类的构造函数设置右键菜单策略</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.cpp</span></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QMainWindow</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给窗口设置策略: Qt::DefaultContextMenu</span></span><br><span class="line">    <span class="comment">// 在窗口中按下鼠标右键, 这个事件处理器函数被qt框架调用 QWidget::contextMenuEvent()</span></span><br><span class="line">    <span class="built_in">setContextMenuPolicy</span>(Qt::DefaultContextMenu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>第三步在这个窗口类的源文件中重写事件处理器函数 contextMenuEvent()</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.cpp</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::contextMenuEvent</span><span class="params">(QContextMenuEvent *event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 弹出一个菜单, 菜单项是 QAction 类型</span></span><br><span class="line">    QMenu menu;</span><br><span class="line">    QAction* act = menu.<span class="built_in">addAction</span>(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">    <span class="built_in">connect</span>(act, &amp;QAction::triggered, <span class="keyword">this</span>, [=]()</span><br><span class="line">    &#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;title&quot;</span>, <span class="string">&quot;您选择的是C++...&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    menu.<span class="built_in">addAction</span>(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">    menu.<span class="built_in">addAction</span>(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">    menu.<span class="built_in">exec</span>(QCursor::<span class="built_in">pos</span>());	<span class="comment">// 右键菜单被模态显示出来了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-6-2-2-Qt-ActionsContextMenu"><a href="#1-6-2-2-Qt-ActionsContextMenu" class="headerlink" title="1.6.2.2 Qt::ActionsContextMenu"></a>1.6.2.2 Qt::ActionsContextMenu</h4><blockquote>
<p>使用这个策略实现右键菜单, 是最简单的一种, 我们只需要创建一些 <code>QAction</code> 类型的对象并且将他们添加到当前的窗口中,当我们在窗口中点击鼠标右键这些QAction类型的菜单项就可以显示出来了。<br>虽然这种方法比较简单，但是它有一定的局限性，就是在一个窗口中不能根据不同的需求制作不同的右键菜单，这种方式只能得到一个唯一的右键菜单。<br>相关的处理代码如下：</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.cpp</span></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QMainWindow</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只要将某个QAction添加给对应的窗口, 这个action就是这个窗口右键菜单中的一个菜单项了</span></span><br><span class="line">    <span class="comment">// 在窗口中点击鼠标右键, 就可以显示这个菜单</span></span><br><span class="line">    <span class="built_in">setContextMenuPolicy</span>(Qt::ActionsContextMenu);</span><br><span class="line">    <span class="comment">// 给当前窗口添加QAction对象</span></span><br><span class="line">    QAction* act1  = <span class="keyword">new</span> <span class="built_in">QAction</span>(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">    QAction* act2 = <span class="keyword">new</span> <span class="built_in">QAction</span>(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">    QAction* act3  = <span class="keyword">new</span> <span class="built_in">QAction</span>(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">addAction</span>(act1);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">addAction</span>(act2);</span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">addAction</span>(act3);</span><br><span class="line">    <span class="built_in">connect</span>(act1, &amp;QAction::triggered, <span class="keyword">this</span>, [=]()</span><br><span class="line">    &#123;</span><br><span class="line">         QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;title&quot;</span>, <span class="string">&quot;您选择的是C++...&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="1-6-2-3-Qt-CustomContextMenu"><a href="#1-6-2-3-Qt-CustomContextMenu" class="headerlink" title="1.6.2.3 Qt::CustomContextMenu"></a>1.6.2.3 Qt::CustomContextMenu</h4><blockquote>
<p>使用这个策略实现右键菜单, 当点击鼠标右键，窗口会产生一个 <code>QWidget::customContextMenuRequested()</code>信号<br>注意仅仅只是发射信号，意味着要自己写显示右键菜单的槽函数（slot），这个信号是QWidget唯一与右键菜单有关的信号。</p>
</blockquote>
<p>来看一下这个信号的函数原型:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意: 信号中的参数pos为当前窗口的坐标，并非屏幕坐标，右键菜单显示需要使用屏幕坐标</span></span><br><span class="line">[signal] <span class="function"><span class="type">void</span> <span class="title">QWidget::customContextMenuRequested</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span></span></span><br></pre></td></tr></table></figure>

<p>代码实现也比较简单, 如下所示:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mainwindow.cpp</span></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QMainWindow</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 策略 Qt::CustomContextMenu</span></span><br><span class="line">    <span class="comment">// 当在窗口中点击鼠标右键, 窗口会发出一个信号: QWidget::customContextMenuRequested()</span></span><br><span class="line">    <span class="comment">// 对应发射出的这个信号, 需要添加一个槽函数, 用来显示右键菜单</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;<span class="built_in">setContextMenuPolicy</span>(Qt::CustomContextMenu);</span><br><span class="line">    <span class="built_in">connect</span>(<span class="keyword">this</span>, &amp;MainWindow::customContextMenuRequested, <span class="keyword">this</span>, [=](<span class="type">const</span> QPoint &amp;pos)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 参数 pos 是鼠标按下的位置, 但是不能直接使用, 这个坐标不是屏幕坐标, 是当前窗口的坐标</span></span><br><span class="line">        <span class="comment">// 如果要使用这个坐标需要将其转换为屏幕坐标</span></span><br><span class="line">        QMenu menu;</span><br><span class="line">        QAction* act = menu.<span class="built_in">addAction</span>(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        <span class="built_in">connect</span>(act, &amp;QAction::triggered, <span class="keyword">this</span>, [=]()</span><br><span class="line">        &#123;</span><br><span class="line">            QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;title&quot;</span>, <span class="string">&quot;您选择的是C++...&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        menu.<span class="built_in">addAction</span>(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        menu.<span class="built_in">addAction</span>(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        <span class="comment">// menu.exec(QCursor::pos());</span></span><br><span class="line">        <span class="comment">// 将窗口坐标转换为屏幕坐标</span></span><br><span class="line">        QPoint newpt = <span class="keyword">this</span>-&gt;<span class="built_in">mapToGlobal</span>(pos);</span><br><span class="line">        menu.<span class="built_in">exec</span>(newpt);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在上边的程序中, 我们通过窗口发射的信号得到了一个坐标类型的参数<br>注意<code>这个坐标是当前窗口的窗口坐标, 不是屏幕坐标,显示右键菜单需要使用屏幕坐标。</code></p>
</blockquote>
<p> 对应这个坐标的处理可以有两种方式：</p>
<ul>
<li><p>弃用，选择使用 <code>QCursor::pos()</code> 得到光标在屏幕的坐标位置</p>
</li>
<li><p>坐标转换, 将窗口坐标转换为屏幕坐标, 这里用到了一个函数 <code>mapToGlobal</code></p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是当前窗口坐标, 返回值为屏幕坐标</span></span><br><span class="line"><span class="function">QPoint <span class="title">QWidget::mapToGlobal</span><span class="params">(<span class="type">const</span> QPoint &amp;pos)</span> <span class="type">const</span></span>;</span><br></pre></td></tr></table></figure>

<p>不管使用以上哪种方式显示右键菜单, 显示出来之后的效果是一样的</p>
<p><img src="/img/9.85.png" alt="在这里插入图片描述"></p>
<p>最后如果想要让自己的右键菜单项显示图标, 可以调用这个函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只显示文本字符串</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::addAction</span><span class="params">(<span class="type">const</span> QString &amp;text)</span></span>;</span><br><span class="line"><span class="comment">// 可以显示图标 + 文本字符串</span></span><br><span class="line"><span class="function">QAction *<span class="title">QMenu::addAction</span><span class="params">(<span class="type">const</span> QIcon &amp;icon, <span class="type">const</span> QString &amp;text)</span></span>;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="2-窗口布局"><a href="#2-窗口布局" class="headerlink" title="2. 窗口布局"></a>2. 窗口布局</h1><h2 id="2-1-布局的样式"><a href="#2-1-布局的样式" class="headerlink" title="2.1 布局的样式"></a>2.1 布局的样式</h2><blockquote>
<p>Qt窗口布局是指将多个子窗口按照某种排列方式将其全部展示到对应的父窗口中的一种处理方式</p>
</blockquote>
<p>在Qt中常用的布局样式有三种，分别是：</p>
<table>
<thead>
<tr>
<th>布局样式</th>
<th>描述</th>
<th>行数</th>
<th>列数</th>
</tr>
</thead>
<tbody><tr>
<td>水平布局</td>
<td>布局中的所有的控件水平排列</td>
<td>1行</td>
<td>N列 (N&gt;&#x3D;1)</td>
</tr>
<tr>
<td>垂直布局</td>
<td>布局中的所有的控件垂直排列</td>
<td>N行 (N&gt;&#x3D;1)</td>
<td>1列</td>
</tr>
<tr>
<td>网格（栅格）布局</td>
<td>布局中的所有的控件垂直+水平排列</td>
<td>N行 (N&gt;&#x3D;1)</td>
<td>N列 (N&gt;&#x3D;1)</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">有问有答:</span><br><span class="line">    1. 控件的位置可以通过坐标指定, 为什么还要使用布局?</span><br><span class="line">    	- 坐标指定的位置是固定的, 当窗口大小发生改变, 子窗口位置不会变化</span><br><span class="line">    	- 使用坐标指定子窗口位置, 这个控件可能会被其他控件覆盖导致无法显示出来</span><br><span class="line">    	- 使用布局的方式可以完美解决以上的问题</span><br><span class="line">    	- 一般在制作窗口的过程中都是给子控件进行布局, 而不是指定固定坐标位置</span><br><span class="line">    2. 布局有局限性吗, 窗口结构复杂如何解决呢?</span><br><span class="line">        - 没有局限性, 并且布局的使用是非常灵活的</span><br><span class="line">    	- 各种布局是可以无限嵌套使用的, 这样就可以制作成非常复杂的窗口了</span><br><span class="line">    	- 思路是这样的: 给窗口设置布局, 在布局中添加窗口, 子窗口中再设置布局, </span><br><span class="line">    	  在子窗口布局中再次添加窗口, ......(无限循环)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-2-在UI窗口中设置布局"><a href="#2-2-在UI窗口中设置布局" class="headerlink" title="2.2 在UI窗口中设置布局"></a>2.2 在UI窗口中设置布局</h2><blockquote>
<p>在UI窗口中进行布局的设置一共有两种处理方式</p>
</blockquote>
<h3 id="2-2-1-方式1"><a href="#2-2-1-方式1" class="headerlink" title="2.2.1 方式1"></a>2.2.1 方式1</h3><blockquote>
<p>第一种方式是使用Qt提供的布局, 从工具箱中找到相关的布局, 然后将其拖拽到UI窗口中</p>
</blockquote>
<p><img src="/img/9.86.png" alt="在这里插入图片描述"></p>
<ul>
<li>将相应的控件放入到布局对应的红色框内部, 这些控件就按照布局的样式自动排列到一起了，是不是很方便，赶紧自己操作起来感受一下吧。</li>
</ul>
<p><img src="/img/9.87.png" alt="在这里插入图片描述"></p>
<ul>
<li>除此之外, 我们也可以修改当前布局, 需要先选中当前布局, 然后鼠标右键, 在右键菜单中找布局在其子菜单项中选择其他布局即可</li>
</ul>
<p><img src="/img/9.88.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-2-2-方式2"><a href="#2-2-2-方式2" class="headerlink" title="2.2.2 方式2"></a>2.2.2 方式2</h3><blockquote>
<p>第二种方式是直接在父窗口中对子部件进行布局, 如果窗口结构很复杂需要嵌套, 那么就需要先将这些子部件放到一个<code>容器类型</code>的窗口中,然后再对这个容器类型的窗口进行布局操作。</p>
</blockquote>
<ol>
<li>首先需要从工具栏中拖拽一个容器类型的窗口到UI界面上</li>
</ol>
<p><strong>一般首选QWidget原因是简单, 并且窗口显示之后看不到任何痕迹</strong></p>
<p><img src="/img/9.89.png" alt="在这里插入图片描述"></p>
<ol start="2">
<li>将要布局的子控件放到这个QWidget中</li>
</ol>
<p><strong>控件拖放过程中无需在意位置和是否对齐, 没有布局之前显示杂乱无序是正常现象。</strong></p>
<p><img src="/img/9.90.png" alt="在这里插入图片描述"></p>
<ol start="3">
<li>对这个QWidget进行布局</li>
</ol>
<p><strong>首选选中这个存储子部件的父容器窗口, 然后鼠标右键, 在右键菜单中找<code>布局</code>, 通过其子菜单就可以选择需要的布局方式了。布局之后所有的子部件就能够按照对应样式排列了(<code>如果是网格布局, 有时候需要使用鼠标调节一下</code>)</strong></p>
<p><img src="/img/9.91.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>也可以通过窗口上方工具栏提供的布局按钮进行窗口布局</p>
</blockquote>
<p><img src="/img/9.92.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-2-3-弹簧的使用"><a href="#2-2-3-弹簧的使用" class="headerlink" title="2.2.3 弹簧的使用"></a>2.2.3 弹簧的使用</h3><p>弹簧也有对应的属性可以设置, 具体属性如下图所示:<br><img src="/img/9.93.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>关于弹簧的sizeType属性, 有很多选项, 一般常用的只有两个:<br><code>Fixed</code>: 得到一个固定大小的弹簧<br><code>Expanding</code>: 得到一个可伸缩的弹簧, 默认弹簧撑到最大</p>
</blockquote>
<p><img src="/img/9.94.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-2-4-布局属性设置"><a href="#2-2-4-布局属性设置" class="headerlink" title="2.2.4 布局属性设置"></a>2.2.4 布局属性设置</h3><blockquote>
<p>当我们给窗口设置了布局之后, 选中当前窗口, 就可以看到在其对应的属性窗口中除了有窗口属性, 还有一个布局属性</p>
</blockquote>
<p>介绍一下这些属性:</p>
<p><img src="/img/9.95.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-2-5-布局的注意事项"><a href="#2-2-5-布局的注意事项" class="headerlink" title="2.2.5 布局的注意事项"></a>2.2.5 布局的注意事项</h3><blockquote>
<p>通过UI编辑窗口的树状列表我们可以对所有窗口的布局进行检查, 如果发现某个窗口没有布局, 一定要对其进行设置<br><code>如果某个窗口没有进行布局, 那么当这个窗口显示出来之后里边的子部件就可能无法被显示出来</code> </p>
</blockquote>
<p><img src="/img/9.96.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>一个简单的登录窗口</p>
</blockquote>
<p><img src="/img/9.97.png" alt="在这里插入图片描述"></p>
<hr>
<h2 id="2-3-通过API设置布局"><a href="#2-3-通过API设置布局" class="headerlink" title="2.3 通过API设置布局"></a>2.3 通过API设置布局</h2><blockquote>
<p>在QT中, 布局也有对应的类, 布局类之间的关系如下:</p>
</blockquote>
<p><img src="/img/9.98.png" alt="在这里插入图片描述"></p>
<p>在上图中的布局类虽然很多, 常用的布局类有三个, 就前边给大家介绍的三种布局, 对应关系如下:</p>
<table>
<thead>
<tr>
<th>布局样式</th>
<th>类名</th>
</tr>
</thead>
<tbody><tr>
<td>水平布局</td>
<td>QHBoxLayout</td>
</tr>
<tr>
<td>垂直布局</td>
<td>QVBoxLayout</td>
</tr>
<tr>
<td>网格（栅格）布局</td>
<td>QGridLayout</td>
</tr>
</tbody></table>
<p>一般我们不使用这些布局类对窗口进行布局<br>但还是在这里介绍一下这些类中常用的一些API函数</p>
<h3 id="2-3-1-QLayout"><a href="#2-3-1-QLayout" class="headerlink" title="2.3.1 QLayout"></a>2.3.1 QLayout</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 在布局最后面添加一个窗口</span><br><span class="line">void QLayout::addWidget(QWidget *w);</span><br><span class="line">// 将某个窗口对象从布局中移除, 窗口对象如果不再使用需要自己析构</span><br><span class="line">void QLayout::removeWidget(QWidget *widget);</span><br><span class="line">// 设置布局的四个边界大小, 即: 左、上、右和下的边距。</span><br><span class="line">void QLayout::setContentsMargins(int left, int top, int right, int bottom);</span><br><span class="line">// 设置布局中各个窗口之间的间隙大小</span><br><span class="line">void setSpacing(int);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="2-3-2-QHBoxLayout"><a href="#2-3-2-QHBoxLayout" class="headerlink" title="2.3.2 QHBoxLayout"></a>2.3.2 QHBoxLayout</h3><blockquote>
<p>这个类中的常用API都是从基类继承过来的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 创建符窗口对象</span><br><span class="line">QWidget *window = new QWidget;</span><br><span class="line">// 创建若干个子窗口对象</span><br><span class="line">QPushButton *button1 = new QPushButton(<span class="string">&quot;One&quot;</span>);</span><br><span class="line">QPushButton *button2 = new QPushButton(<span class="string">&quot;Two&quot;</span>);</span><br><span class="line">QPushButton *button3 = new QPushButton(<span class="string">&quot;Three&quot;</span>);</span><br><span class="line">QPushButton *button4 = new QPushButton(<span class="string">&quot;Four&quot;</span>);</span><br><span class="line">QPushButton *button5 = new QPushButton(<span class="string">&quot;Five&quot;</span>);</span><br><span class="line"></span><br><span class="line">// 创建水平布局对象</span><br><span class="line">QHBoxLayout *layout = new QHBoxLayout;</span><br><span class="line">// 将子窗口添加到布局中</span><br><span class="line">layout-&gt;addWidget(button1);</span><br><span class="line">layout-&gt;addWidget(button2);</span><br><span class="line">layout-&gt;addWidget(button3);</span><br><span class="line">layout-&gt;addWidget(button4);</span><br><span class="line">layout-&gt;addWidget(button5);</span><br><span class="line"></span><br><span class="line">// 将水平布局设置给父窗口对象</span><br><span class="line">window-&gt;setLayout(layout);</span><br><span class="line">// 显示父窗口</span><br><span class="line">window-&gt;show();</span><br></pre></td></tr></table></figure>

<p>代码效果展示:</p>
<p><img src="/img/9.99.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-3-3-QVBoxLayout"><a href="#2-3-3-QVBoxLayout" class="headerlink" title="2.3.3 QVBoxLayout"></a>2.3.3 QVBoxLayout</h3><blockquote>
<p>这个类中的常用API都是从基类继承过来的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 创建符窗口对象</span><br><span class="line">QWidget *window = new QWidget;</span><br><span class="line">// 创建若干个子窗口对象</span><br><span class="line">QPushButton *button1 = new QPushButton(<span class="string">&quot;One&quot;</span>);</span><br><span class="line">QPushButton *button2 = new QPushButton(<span class="string">&quot;Two&quot;</span>);</span><br><span class="line">QPushButton *button3 = new QPushButton(<span class="string">&quot;Three&quot;</span>);</span><br><span class="line">QPushButton *button4 = new QPushButton(<span class="string">&quot;Four&quot;</span>);</span><br><span class="line">QPushButton *button5 = new QPushButton(<span class="string">&quot;Five&quot;</span>);</span><br><span class="line"></span><br><span class="line">// 创建垂直布局对象</span><br><span class="line">QVBoxLayout *layout = new QVBoxLayout;</span><br><span class="line">// 将子窗口添加到布局中</span><br><span class="line">layout-&gt;addWidget(button1);</span><br><span class="line">layout-&gt;addWidget(button2);</span><br><span class="line">layout-&gt;addWidget(button3);</span><br><span class="line">layout-&gt;addWidget(button4);</span><br><span class="line">layout-&gt;addWidget(button5);</span><br><span class="line"></span><br><span class="line">// 将水平布局设置给父窗口对象</span><br><span class="line">window-&gt;setLayout(layout);</span><br><span class="line">// 显示父窗口</span><br><span class="line">window-&gt;show();</span><br></pre></td></tr></table></figure>

<p>代码效果展示:<br><img src="/img/9.100.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="2-3-4-QGridLayout"><a href="#2-3-4-QGridLayout" class="headerlink" title="2.3.4 QGridLayout"></a>2.3.4 QGridLayout</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// 构造函数</span><br><span class="line">QGridLayout::QGridLayout();</span><br><span class="line">QGridLayout::QGridLayout(QWidget *parent);</span><br><span class="line"></span><br><span class="line">// 添加窗口对象到网格布局中</span><br><span class="line">/*</span><br><span class="line">参数:</span><br><span class="line">  - widget: 添加到布局中的窗口对象</span><br><span class="line">  - row: 添加到布局中的窗口对象位于第几行 (从0开始)</span><br><span class="line">  - column: 添加到布局中的窗口对象位于第几列 (从0开始)</span><br><span class="line">  - alignment: 窗口在布局中的对齐方式, 没有特殊需求使用默认值即可</span><br><span class="line">*/</span><br><span class="line">void QGridLayout::addWidget(</span><br><span class="line">	QWidget *widget, int row, int column, </span><br><span class="line">Qt::Alignment alignment = Qt::Alignment());</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">参数:</span><br><span class="line">  - widget: 添加到布局中的窗口对象</span><br><span class="line">  - fromRow: 添加到布局中的窗口对象位于第几行 (从0开始)</span><br><span class="line">  - fromColumn: 添加到布局中的窗口对象位于第几列 (从0开始)</span><br><span class="line">  - rowSpan: 添加的窗口从 fromRow 行开始跨越的行数</span><br><span class="line">  - columnSpan: 添加的窗口从 fromColumn 列开始跨越的列数</span><br><span class="line">  - alignment: 窗口在布局中的对齐方式, 没有特殊需求使用默认值即可</span><br><span class="line">*/</span><br><span class="line">void QGridLayout::addWidget(</span><br><span class="line">QWidget *widget, int fromRow, int fromColumn, </span><br><span class="line">int rowSpan, int columnSpan, </span><br><span class="line">Qt::Alignment alignment = Qt::Alignment());</span><br><span class="line"></span><br><span class="line">// 设置 column 对应的列的最新宽度, 单位: 像素</span><br><span class="line">void QGridLayout::setColumnMinimumWidth(int column, int minSize);</span><br><span class="line"></span><br><span class="line">// 设置布局中水平方向窗口之间间隔的宽度</span><br><span class="line">void QGridLayout::setHorizontalSpacing(int spacing);</span><br><span class="line"></span><br><span class="line">// 设置布局中垂直方向窗口之间间隔的宽度</span><br><span class="line">void QGridLayout::setVerticalSpacing(int spacing);</span><br></pre></td></tr></table></figure>

<p>测试代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// 创建父窗口对象</span><br><span class="line">QWidget* window = new QWidget;</span><br><span class="line">// 创建子窗口对象</span><br><span class="line">QPushButton *button1 = new QPushButton(<span class="string">&quot;One&quot;</span>);</span><br><span class="line">QPushButton *button2 = new QPushButton(<span class="string">&quot;Two&quot;</span>);</span><br><span class="line">QPushButton *button3 = new QPushButton(<span class="string">&quot;Three&quot;</span>);</span><br><span class="line">QPushButton *button4 = new QPushButton(<span class="string">&quot;Four&quot;</span>);</span><br><span class="line">QPushButton *button5 = new QPushButton(<span class="string">&quot;Five&quot;</span>);</span><br><span class="line">QPushButton *button6 = new QPushButton(<span class="string">&quot;Six&quot;</span>);</span><br><span class="line">// 多行文本编辑框</span><br><span class="line">QTextEdit* txedit = new QTextEdit;</span><br><span class="line">txedit-&gt;setText(<span class="string">&quot;我占用了两行两列的空间哦。&quot;</span>);</span><br><span class="line"></span><br><span class="line">QGridLayout* layout = new QGridLayout;</span><br><span class="line">// 按钮起始位置: 第1行, 第1列, 该按钮占用空间情况为1行1列</span><br><span class="line">layout-&gt;addWidget(button1, 0, 0);</span><br><span class="line">// 按钮起始位置: 第1行, 第2列, 该按钮占用空间情况为1行1列</span><br><span class="line">layout-&gt;addWidget(button2, 0, 1);</span><br><span class="line">// 按钮起始位置: 第1行, 第3列, 该按钮占用空间情况为1行1列</span><br><span class="line">layout-&gt;addWidget(button3, 0, 2);</span><br><span class="line">// 编辑框起始位置: 第2行, 第1列, 该按钮占用空间情况为2行2列</span><br><span class="line">layout-&gt;addWidget(txedit, 1, 0, 2, 2);</span><br><span class="line">// 按钮起始位置: 第2行, 第3列, 该按钮占用空间情况为1行1列</span><br><span class="line">layout-&gt;addWidget(button4, 1, 2);</span><br><span class="line">// 按钮起始位置: 第3行, 第3列, 该按钮占用空间情况为1行1列</span><br><span class="line">layout-&gt;addWidget(button5, 2, 2);</span><br><span class="line">// 按钮起始位置: 第4行, 第1列, 该按钮占用空间情况为1行3列</span><br><span class="line">layout-&gt;addWidget(button6, 3, 0, 1, 3);</span><br><span class="line"></span><br><span class="line">// 网格布局设置给父窗口对象</span><br><span class="line">window-&gt;setLayout(layout);</span><br><span class="line">// 显示父窗口</span><br><span class="line">window-&gt;show();  </span><br></pre></td></tr></table></figure>

<p>测试代码效果展示:</p>
<p><img src="/img/9.101.png" alt="在这里插入图片描述"></p>
<hr>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/pic/5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/22/%E6%8E%A7%E4%BB%B6/" title="控件"><img class="cover" src="/pic/5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">控件</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/22/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%BF%A1%E5%8F%B7%E6%A7%BD/" title="基础数据类型和信号槽"><img class="cover" src="/pic/5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">基础数据类型和信号槽</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/pic/avater.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">NineTSe</div><div class="author-info__description">难正经</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/9tse"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/9TSe" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:9TSewer@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">C++部分,Qt,Linux,文章摘于 https://subingwen.cn/</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E7%AA%97%E5%8F%A3%E7%B1%BB"><span class="toc-text">1. 基础窗口类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-QWidget"><span class="toc-text">1.1 QWidget</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E8%AE%BE%E7%BD%AE%E7%88%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">1.1.1 设置父对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E7%AA%97%E5%8F%A3%E4%BD%8D%E7%BD%AE"><span class="toc-text">1.1.2 窗口位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-%E7%AA%97%E5%8F%A3%E5%B0%BA%E5%AF%B8"><span class="toc-text">1.1.3 窗口尺寸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-%E7%AA%97%E5%8F%A3%E6%A0%87%E9%A2%98%E5%92%8C%E5%9B%BE%E6%A0%87"><span class="toc-text">1.1.4 窗口标题和图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-5-%E4%BF%A1%E5%8F%B7"><span class="toc-text">1.1.5 信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-6-%E6%A7%BD%E5%87%BD%E6%95%B0"><span class="toc-text">1.1.6 槽函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-QDialog"><span class="toc-text">1.2 QDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E5%B8%B8%E7%94%A8API"><span class="toc-text">1.2.1 常用API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">1.2.2 常用使用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-QDialog%E7%9A%84%E5%AD%90%E7%B1%BB"><span class="toc-text">1.3 QDialog的子类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-QMessageBox"><span class="toc-text">1.3.1 QMessageBox</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-1-API-%E9%9D%99%E6%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">1.3.1.1 API - 静态函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-2-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.1.2 测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-QFileDialog"><span class="toc-text">1.3.2 QFileDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-1-API-%E9%9D%99%E6%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">1.3.2.1 API - 静态函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-2-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.2.2 测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-QFontDialog"><span class="toc-text">1.3.3 QFontDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-1-QFont-%E5%AD%97%E4%BD%93%E7%B1%BB"><span class="toc-text">1.3.3.1 QFont 字体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-2-QFontDialog%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81API"><span class="toc-text">1.3.3.2 QFontDialog类的静态API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-3-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.3.3 测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-QColorDialog"><span class="toc-text">1.3.4 QColorDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-4-1-%E9%A2%9C%E8%89%B2%E7%B1%BB-QColor"><span class="toc-text">1.3.4.1 颜色类 QColor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-4-2-%E9%9D%99%E6%80%81API%E5%87%BD%E6%95%B0"><span class="toc-text">1.3.4.2 静态API函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-4-3-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.4.3 测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-5-QInputDialog"><span class="toc-text">1.3.5 QInputDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-5-1-API-%E9%9D%99%E6%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">1.3.5.1 API - 静态函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-5-2-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.5.2 测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-6-QProgressDialog"><span class="toc-text">1.3.6 QProgressDialog</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-6-1-%E5%B8%B8%E7%94%A8API"><span class="toc-text">1.3.6.1 常用API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-6-2-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3.6.2 测试代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-QMainWindow"><span class="toc-text">1.4 QMainWindow</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-%E8%8F%9C%E5%8D%95%E6%A0%8F"><span class="toc-text">1.4.1 菜单栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-%E5%B7%A5%E5%85%B7%E6%A0%8F"><span class="toc-text">1.4.2 工具栏</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-1-%E6%B7%BB%E5%8A%A0%E5%B7%A5%E5%85%B7%E6%8C%89%E9%92%AE"><span class="toc-text">1.4.2.1 添加工具按钮</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-2-%E5%B7%A5%E5%85%B7%E6%A0%8F%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-text">1.4.2.2 工具栏的属性设置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-%E7%8A%B6%E6%80%81%E6%A0%8F"><span class="toc-text">1.4.3 状态栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-4-%E5%81%9C%E9%9D%A0%E7%AA%97%E5%8F%A3"><span class="toc-text">1.4.4 停靠窗口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6-qrc"><span class="toc-text">1.5 资源文件 .qrc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E5%9C%A8Qt%E7%AA%97%E5%8F%A3%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95"><span class="toc-text">1.6 在Qt窗口中添加右键菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-%E5%9F%BA%E4%BA%8E%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.6.1 基于鼠标事件实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-1-1-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">1.6.1.1 实现思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-1-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.6.1.2 代码实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-%E5%9F%BA%E4%BA%8E%E7%AA%97%E5%8F%A3%E7%9A%84%E8%8F%9C%E5%8D%95%E7%AD%96%E7%95%A5%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.6.2 基于窗口的菜单策略实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-2-1-Qt-DefaultContextMenu"><span class="toc-text">1.6.2.1 Qt::DefaultContextMenu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-2-2-Qt-ActionsContextMenu"><span class="toc-text">1.6.2.2 Qt::ActionsContextMenu</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-2-3-Qt-CustomContextMenu"><span class="toc-text">1.6.2.3 Qt::CustomContextMenu</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80"><span class="toc-text">2. 窗口布局</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B8%83%E5%B1%80%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-text">2.1 布局的样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%9C%A8UI%E7%AA%97%E5%8F%A3%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%B8%83%E5%B1%80"><span class="toc-text">2.2 在UI窗口中设置布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%96%B9%E5%BC%8F1"><span class="toc-text">2.2.1 方式1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%96%B9%E5%BC%8F2"><span class="toc-text">2.2.2 方式2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%BC%B9%E7%B0%A7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2.3 弹簧的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-text">2.2.4 布局属性设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-5-%E5%B8%83%E5%B1%80%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">2.2.5 布局的注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E9%80%9A%E8%BF%87API%E8%AE%BE%E7%BD%AE%E5%B8%83%E5%B1%80"><span class="toc-text">2.3 通过API设置布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-QLayout"><span class="toc-text">2.3.1 QLayout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-QHBoxLayout"><span class="toc-text">2.3.2 QHBoxLayout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-QVBoxLayout"><span class="toc-text">2.3.3 QVBoxLayout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-QGridLayout"><span class="toc-text">2.3.4 QGridLayout</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/05/01/Python/" title="Python"><img src="/pic/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python"/></a><div class="content"><a class="title" href="/2024/05/01/Python/" title="Python">Python</a><time datetime="2024-05-01T13:07:51.000Z" title="发表于 2024-05-01 21:07:51">2024-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/18/GB28181/" title="GB28181"><img src="/pic/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GB28181"/></a><div class="content"><a class="title" href="/2024/04/18/GB28181/" title="GB28181">GB28181</a><time datetime="2024-04-18T07:38:27.000Z" title="发表于 2024-04-18 15:38:27">2024-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/18/RTMP/" title="RTMP"><img src="/pic/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RTMP"/></a><div class="content"><a class="title" href="/2024/03/18/RTMP/" title="RTMP">RTMP</a><time datetime="2024-03-18T04:14:50.000Z" title="发表于 2024-03-18 12:14:50">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/05/RTSP1/" title="RTSP"><img src="/pic/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RTSP"/></a><div class="content"><a class="title" href="/2023/12/05/RTSP1/" title="RTSP">RTSP</a><time datetime="2023-12-05T13:58:26.000Z" title="发表于 2023-12-05 21:58:26">2023-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/05/ffmpeg/" title="ffmpeg命令行简介"><img src="/pic/1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ffmpeg命令行简介"/></a><div class="content"><a class="title" href="/2023/12/05/ffmpeg/" title="ffmpeg命令行简介">ffmpeg命令行简介</a><time datetime="2023-12-05T13:37:52.000Z" title="发表于 2023-12-05 21:37:52">2023-12-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By NineTSe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>