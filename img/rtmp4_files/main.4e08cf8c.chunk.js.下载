(this["webpackJsonpai-quality"]=this["webpackJsonpai-quality"]||[]).push([[3],{109:function(e,t,n){e.exports={header:"header---iVPd",right:"right--zcZsA",upload:"upload--KGJMp",icon:"icon--2UwAq",reUpload:"reUpload--nC1sb",download:"download--IHRnk",uploadWrap:"uploadWrap---PZlu",buyVip:"buyVip--fU7Ba"}},123:function(e,t,n){e.exports={wrap:"wrap--qjGep",scale:"scale--RJjoW",active:"active--V+HZE",count:"count--l-OvS",icon:"icon--95uL3",notAllow:"notAllow--S4351"}},146:function(e,t,n){e.exports={wrap:"wrap--4YVz3",item:"item--THOXa",active:"active--FymmJ"}},188:function(e,t,n){e.exports={logo:"logo--DGQK1",logoImg:"logoImg--Dnjoa",divider:"divider--6IA8h",title:"title--TGDPo",tag:"tag--E1mc3"}},207:function(e,t,n){e.exports={scaleList:"scaleList--Q4sz7",item:"item--FqLJI",active:"active--wLNKX"}},279:function(e,t,n){e.exports={stage:"stage--4ET6L",image:"image--20f83"}},329:function(e,t,n){e.exports={app:"app--kr1Qs",content:"content--+mUvh"}},468:function(e,t,n){n(469),e.exports=n(778)},486:function(e,t,n){},640:function(e,t,n){var a={"./collapse-btn-dark.svg":641,"./collapse-btn-light.svg":642,"./collapse-btn.svg":643,"./logo-white.svg":644,"./logo.svg":645,"./new.svg":646,"./not-vip.svg":647,"./vip.svg":648};function r(e){return e=c(e),n(e)}function c(e){if(n.o(a,e))return a[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}r.keys=function(){return Object.keys(a)},r.resolve=c,(e.exports=r).id=640},65:function(e,t,n){e.exports={canvasWrap:"canvasWrap--ZZJzP",topRightText:"topRightText--P0JvY",container:"container--+f8MH",canvasWindow:"canvasWindow--QIXij",canvasStage:"canvasStage--aC56T",canvasScaleWrap:"canvasScaleWrap--wRs1P",canvas:"canvas--250+4",loadingWrap:"loadingWrap--JOl3q",loadingSvg:"loadingSvg--cTWRm",rotate:"rotate--WCGe7",title:"title--kwyTd",desc:"desc--Qvoao",remove:"remove--beVJe"}},724:function(e,t){},74:function(e,t,n){e.exports={wrap:"wrap--HpD2j",title:"title--nzVwd",desc:"desc--YXEEQ",content:"content--sTSVN",video:"video--Rav6V",videoTab:"videoTab--q7CeY",icon:"icon---eesm",active:"active--tX2Jd",uploadContainer:"uploadContainer--3PPPC",upload:"upload--g6M6t"}},755:function(e,t,n){},756:function(e,t,n){},757:function(e,t,n){},765:function(e,t,n){},777:function(e,t,n){},778:function(e,t,n){"use strict";function a(){return new Promise((function(e){var t=2,n=function(){var a=Object(p.a)(Object(d.a)().mark((function a(){var r;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.next=2;var c=v.a.get("meitustat");if(!c)return"";try{return JSON.parse(c).wgid}catch(a){return""}return;case 2:(r=a.sent)||0!==t?r?e(r):setTimeout((function(){t-=1,n()}),500):e(Object(w.a)());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();n()}))}n.r(t);t=n(6);var r,c,i=n(39),o=(i=n.n(i),n(486),n(0)),s=n.n(o),u=n(180),l=n(3),d=n(7),p=n(14),f=n(5),b=((h=r=r||{}).white="light",h.dark="dark",(h=P=P||{}).MENU1="menu1",h.MENU2="menu2",(h=c=c||{}).HD="HD",h.HDU="HDU",n.p+"static/media/logo-dark.3a8ed427.svg"),m=n.p+"static/images/c0a7016fa204fcceeb6d9347c32d97a6.png",h=n(188),j=n.n(h),g=(n(250),"1189857523"),v=(h=(n(227),n(94)),n.n(h)),w=n(791),O=n(95),x=(h=n(405),n.n(h)),_=n(406),k=n(407),y=n(790),C=(h=n(104),n.n(h)),S=0,N=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("".concat("https://webapi-pc.meitu.com","/user/info"),{method:"GET",params:t,hideErrorToast:!0});case 2:if((a=e.sent).data.code!==S);else if(a.data.data)return a=a.data.data,n=a.userInfo,a=a.vipInfo,e.abrupt("return",Object(l.a)(Object(l.a)({},n),a));e.next=7;break;case 7:return e.abrupt("return",{avatar:"",id:null,screen_name:""});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t,n){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("".concat("https://webapi-pc.meitu.com","/editsdk/check_app_key"),{method:"GET",params:{accessKey:t,target_module:n},hideErrorToast:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=(h=n(187),n(8)),P={userInfo:void 0,setUserInfo:Object(t.b)((function(e,t){e.userInfo=t})),mode:void 0,setMode:Object(t.b)((function(e,t){e.mode=t})),menu:P.MENU1,setMenu:Object(t.b)((function(e,t){e.menu=t})),domainWhiteList:[],setDomainWhiteList:Object(t.b)((function(e,t){e.domainWhiteList=Array.from(new Set([].concat(Object(E.a)(e.domainWhiteList),Object(E.a)(t))))}))},D=n(30),R=n.n(D),T=(D=((D=U=U||{}).MOVE="move",D.SMEAR="smear",D.ERASE="erase",{scale:1,setScale:Object(t.b)((function(e,t){e.scale=t})),toolType:U.SMEAR,setToolType:Object(t.b)((function(e,t){e.toolType=t})),strokeSize:40,setStrokeSize:Object(t.b)((function(e,t){e.strokeSize=t})),stageSize:{width:0,height:0,left:0,top:0,url:"",resultUrl:""},setStageSize:Object(t.b)((function(e,t){t&&(e.stageSize=Object.assign({},e.stageSize,t))})),clearStrokeIndex:0,setClearStrokeIndex:Object(t.b)((function(e){e.clearStrokeIndex++})),isStageDrop:!1,setIsStageDrop:Object(t.b)((function(e,t){e.isStageDrop=t})),currentImageType:c.HD,setCurrentImageType:Object(t.b)((function(e,t){e.currentImageType=t})),isDoQuality:!1,setIsDoQuality:Object(t.b)((function(e,t){e.isDoQuality=t})),saveParams:{},setSaveParams:Object(t.b)((function(e,t){e.saveParams=R()(t)})),showWaterMark:!1,setShowWaterMark:Object(t.b)((function(e,t){e.showWaterMark=t})),showEffectModal:!1,setShowEffectModal:Object(t.b)((function(e,t){e.showEffectModal=t})),downloadCount:0,setDownloadCount:Object(t.b)((function(e,t){e.downloadCount=t})),resetStage:Object(t.b)((function(e,t){e.stageSize=Object(l.a)(Object(l.a)({},e.stageSize),t),e.currentImageType=c.HD})),opaquePNGImageURL:null,setOpaquePNGImageURL:Object(t.b)((function(e,t){e.opaquePNGImageURL=t}))}),n(137)),U=Object(t.d)({sdk:h.a,globalModel:P,globalMaskModel:T.b,stageModel:D}),M=(h=Object(t.e)()).useStoreState,A=h.useStoreActions,L=(h.useStoreDispatch,U),q=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("".concat("https://webapi-pc.meitu.com","/v1/record/show_ai_eliminate_pop"),{method:"GET",params:{type:3}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={parameter:{rsp_media_type:"url",ir_mode:0,save_photo_format:n=-1!==t.indexOf(".png")?2:1},media_info_list:[{media_data:t,media_extra:{},media_profiles:{media_data_type:"url"}}],extra:{}},e.next=4,Object(O.a)("".concat("https://webapi-pc.meitu.com","/v2/mtlab/image_restoration_async"),{method:"POST",data:n,headers:{"Content-Type":"application/json"}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={parameter:{rsp_media_type:"url",ir_mode:4,save_photo_format:n=-1!==t.indexOf(".png")?2:1},media_info_list:[{media_data:t,media_extra:{},media_profiles:{media_data_type:"url"}}],extra:{}},e.next=4,Object(O.a)("".concat("https://webapi-pc.meitu.com","/v3/mtlab/image_restoration_async"),{method:"POST",data:n,headers:{"Content-Type":"application/json"}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("".concat("https://webapi-pc.meitu.com","/v1/mtlab/query"),{method:"GET",params:{msg_id:t},hideErrorToast:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("".concat("https://webapi-pc.meitu.com","/v1/record/save_ai_eliminate"),{method:"POST",data:Object(l.a)(Object(l.a)({},t),{},{type:3}),params:{client_id:g}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(120),J=n(282),W=n(438),V={},K=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={appKey:"C5F34252F04B6D50",env:"release"},n=new W.a(n),e.next=5,n.init();case 5:V=n.getABInfo(),null!=(t=window)&&null!=(t=t.mtstat)&&t.setABInfo(V),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){},Y=C.a.parse(window.location.search),X="".concat(window.location.protocol,"//").concat(window.location.host,"/design/callback.html"),Z=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n,r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.first_url||window.sessionStorage.getItem("first_url"),e.next=3,a();case 3:n=e.sent,(r=Object(k.MeituAccountQuickLogin)({dev:!1,env:0,showLoading:!1,showHeaderLogo:!0,relogin:!0,showCloseBtn:!0,clientId:g,callback:X,gid:n,clientParams:{},statParams:{scenes_enter:"hbsj",cur_url:window.location.href,channel:Y.channel||window.sessionStorage.getItem("channel")||"",first_url:t||document.referrer||window.location.href},theme:"mtxx",borderRadius:"14px",contentSpace:90,banner:{enable:!0,type:1,align:"left",style:"border-radius:10px 0 0 10px; height:530px;",image:"https://titan-h5.meitu.com/x-design/login/image/login.svg"},cssLink:"https://titan-h5.meitu.com/x-design/login/css/login.css",clientConfigs:{need_phone:!1}})).on("success",(function(e){var t=e.meta;e=e.response;0===(null==t?void 0:t.code)&&e&&(Q(e.access_token),t={id:e.user.id,avatar:e.user.avatar,screen_name:e.user.screen_name,is_vip:e.user.is_vip,vip_end_time:e.user.vip_end_time},ae(),window.mtstat.login(t.id),y.a({id:t.id}),r.close())})),window.ql=r;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ql){e.next=3;break}return e.next=3,Z();case 3:return null!=(n=window.ql)&&n.create(),e.next=6,new Promise((function(e){return Q=e}));case 6:return t=e.sent,e.next=9,G(Object(l.a)({},L.getState().stageModel.saveParams));case 9:return(n=e.sent).data.data&&L.getActions().stageModel.setDownloadCount(n.data.data.downloaded_count),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.mtstat.logout(),F.clientInfo.isClient)return L.getActions().globalModel.setUserInfo(void 0),F.bridge.logout(),e.abrupt("return");e.next=5;break;case 5:L.getActions().globalModel.setUserInfo(void 0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C.a.parse(window.location.search),a=t.matrix_channel||window.sessionStorage.getItem("matrix_channel")||"",t=decodeURIComponent(t.first_url||window.sessionStorage.getItem("first_url")||""),n=JSON.stringify(V),(a=new J.b({env:"release",theme:"light",commonParams:{module_id:"hzxf",source:"hzxf",app_key:"C5F34252F04B6D50",client_id:g,matrix_channel:a,callback_origin:window.location.origin,channel:Ce(),first_ur:encodeURIComponent(t),ab_info:n}})).on(J.a.SUCCESS,(function(){ae()})).on(J.a.LOGININVALID,(function(){ee()})),window.instanceVipModal=a;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n,a=arguments;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<a.length&&void 0!==a[0]?a[0]:{},window.instanceVipModal){e.next=4;break}return e.next=4,te();case 4:null!=(t=window.instanceVipModal)&&t.open(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({});case 2:(t=e.sent).id?L.getActions().globalModel.setUserInfo({id:t.id,screen_name:t.screen_name,avatar:t.avatar,is_vip:t.is_vip,vip_end_time:t.vip_end_time,vip_days:t.vip_days}):L.getActions().globalModel.setUserInfo(void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=null,ce={client_id:g,language:"zh-Hans",gid:""};function ie(){return(ie=Object(p.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={gid:ce.gid,osType:"web",isToB:!1,virtualId:"2",functionInfo:{name:"00106"},positionInfo:{level1:"00106"},uid:(null==(t=L.getState().globalModel.userInfo)?void 0:t.id)||parseInt(window.localStorage.getItem("uid")||"")||0},e.next=5,Object(_.a)(t);case 5:return t=e.sent,e.abrupt("return",t);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function oe(){return(oe=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("post"!==(null==(n=t.method)?void 0:n.toLowerCase()))return e.abrupt("return",t);e.next=2;break;case 2:return t.headers||(t.headers={}),e.next=5,function(){return ie.apply(this,arguments)}();case 5:return n=e.sent,t.headers["x-mtcc-client"]=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return!!Object({NODE_ENV:"production",PUBLIC_URL:"https://pc.meitudata.com/ai-quality",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_POSTERS:"https://api.posters.meitu.com",REACT_APP_STAT_ENV:"release",REACT_APP_API_WEB:"https://webapi-pc.meitu.com",REACT_APP_ENV:"release",REACT_APP_API_FEEDBACK:"https://api-feedback.meitu.com",REACT_APP_APP_KEY:"C5F34252F04B6D50",REACT_APP_TITLE:"\u7f8e\u56fe\u8bbe\u8ba1\u5ba4AI\u753b\u8d28\u4fee\u590d\u8f6f\u4ef6-\u6a21\u7cca\u56fe\u7247\u53d8\u6e05\u6670-\u5728\u7ebf\u8001\u7167\u7247\u9ad8\u6e05\u4fee\u590d",REACT_APP_CLIENT_ID:"1189857523",REACT_APP_MODULE_ID:"hzxf",REACT_APP_LANGUAGE:"zh-Hans",REACT_APP_RELEASE:"version_202401291542"}).REACT_APP_LOCAL}function ue(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){t({width:a.width,height:a.height,img:a})},a.onerror=function(){n({width:0,height:0,img:a})}}))}function le(){return M((function(e){return e.stageModel.scale}))}function de(){return A((function(e){return e.stageModel.setScale}))}function pe(){return M((function(e){return e.stageModel.stageSize}))}function fe(){return A((function(e){return e.stageModel.setStageSize}))}function be(){return M((function(e){return e.stageModel.isStageDrop}))}function me(){return M((function(e){return e.stageModel.currentImageType}))}function he(){return A((function(e){return e.stageModel.setCurrentImageType}))}function je(){return M((function(e){return e.stageModel.isDoQuality}))}function ge(){return A((function(e){return e.stageModel.setSaveParams}))}function ve(){return M((function(e){return e.stageModel.saveParams}))}function we(){return A((function(e){return e.stageModel.setShowEffectModal}))}function Oe(){return M((function(e){return e.stageModel.downloadCount}))}function xe(){return{opaquePNGImageURL:M((function(e){return e.stageModel.opaquePNGImageURL})),setOpaquePNGImageURL:A((function(e){return e.stageModel.setOpaquePNGImageURL}))}}function _e(){return M((function(e){return e.globalModel.userInfo}))}function ke(e){var t=e.name,n=e.color,a=e.onClick,r=e.fontSize;e=void 0===(e=e.className)?"":e;return Object(Pe.jsx)("span",{style:{color:n,width:"".concat(r,"px"),height:"".concat(r,"px"),display:"block",fontSize:"".concat(r,"px")},onClick:function(e){a&&a(e)},className:ze()("iconfont","icon-".concat(t),e)})}Object(O.b)({baseURL:"./",withCredentials:!0,config:{adaptor:function(e){return{error_code:null==e?void 0:e.error_code,msg:null==e?void 0:e.msg,data:null==e?void 0:e.data}},successCode:0,unauthorizedCodes:[401],unloginHandlerList:["/user/info"],errorHandler:function(){},loginHandler:function(){return new Promise(function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re)return e.next=3,re;e.next=6;break;case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,re=$();case 8:e.t0=e.sent;case 9:n=e.t0,re=null,t(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},requestInterceptors:[function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n,r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return ce.gid=e.sent,t.params&&(t.params.gid=ce.gid),"post"===t.method?(n=Object.assign({},ce,t.data||{}),"application/json"!==t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded",t.data=x.a.stringify(n))):"get"===t.method&&(t.params=Object.assign({timestamp:(new Date).getTime()},ce,t.params||{})),window.self!==window.top?(n=function(){return localStorage.getItem("access_token_silent")||""},t.headers.access_token=n()):(r=function(){return localStorage.getItem("access_token")||""},t.headers.access_token=r()),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(e){return oe.apply(this,arguments)}],responseInterceptors:[]});var ye,Ce=function(){return C.a.parse(window.location.search).channel||window.sessionStorage.getItem("channel")||""},Se="ai-quality-sdk",Ne=((P=ye=ye||{}).SAVE="save",P.LOADED="loaded",P.OPEN="open",!(P.DEBUG="debug")),Ie=s.a.memo((function(){var e=A((function(e){return e.globalModel.setDomainWhiteList})),t=(Object(o.useEffect)((function(){t().then((function(t){e(t)})).catch((function(e){}))}),[]),function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.a.parse(window.location.search),e.next=3,I("".concat(t.platform),Se);case 3:if(t=e.sent,n=t.data,a=null==n||null==(a=n.data)?void 0:a.idna_white_list,0===n.code&&null!=a&&a.length)return e.abrupt("return",a);e.next=10;break;case 10:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return null})),Ee=function(){var e=Object(o.useState)(!1),t=(e=Object(f.a)(e,2))[0],n=e[1],a=fe(),r=C.a.parse(window.location.search),c=M((function(e){return e.globalModel.domainWhiteList})),i=A((function(e){return e.globalModel.setDomainWhiteList})),s=(Object(o.useEffect)((function(){try{r.origin===Se&&window.self!==window.top&&(n(!0),s(),r.open)&&u(r.open)}catch(e){}}),[]),function(){window.addEventListener("message",(function(e){var t=(e=e.data).type,n=e.url;e=e.domain;t===ye.OPEN&&u(n),t!==ye.DEBUG||Ne||(Ne=!0,i([e]))}))}),u=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:n=e.sent,a({width:n.width,height:n.height,url:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{isInSDK:t,sendMessage:function(e){var t;null!=(t=window)&&t.parent&&c.forEach((function(t){window.parent.postMessage(e,t)}))}}},Pe=n(9),De=s.a.memo((function(){function e(){window.open(window.location.origin)}var t=Object(u.a)(),n=Ee().isInSDK;return Object(Pe.jsxs)("div",{className:j.a.logo,children:[n?null:Object(Pe.jsxs)(Pe.Fragment,{children:[t.theme===r.dark?Object(Pe.jsx)("img",{alt:"",className:j.a.logoImg,src:b,onClick:e}):Object(Pe.jsx)("img",{alt:"",className:j.a.logoImg,src:m,onClick:e}),Object(Pe.jsx)("div",{className:j.a.divider})]}),Object(Pe.jsx)("div",{className:j.a.title,children:"\u53d8\u6e05\u6670"})]})})),Re=n(794),Te=n(89),Ue=s.a.memo((function(){var e=_e(),t=me(),n=ve(),a=(Object(o.useEffect)((function(){ae()}),[]),function(){var n=Object(p.a)(Object(d.a)().mark((function n(){var a;return Object(d.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={entrance:"open",second_source:t===c.HD?"gq":"cq"},ne(n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),null!=e&&e.id){n.next=6;break}return n.next=4,$();case 4:return setTimeout(a,1e3),n.abrupt("return");case 6:a();case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()),r=function(){var e=Object(p.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return e.next=4,G(Object(l.a)({},n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Pe.jsx)(Re.a,{userInfo:e,callback:X,listKeys:[Te.a.FEEDBACK,Te.a.BUSINESS],onLogin:r,onLogout:ee,onOpenVipModal:a})})),Me=(D=n(109),n.n(D)),Ae=(n(755),n(1)),Le=n.p+"static/media/svip.94802090.svg",qe=(h=n(146),n.n(h)),ze=(U=n(4),n.n(U)),He=(n(756),s.a.memo((function(){var e=me(),t=pe(),n=je(),a=he(),r=Ee().isInSDK,i=Object(o.useCallback)(function(){var r=Object(p.a)(Object(d.a)().mark((function r(i){var o,s;return Object(d.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n)return r.abrupt("return");r.next=2;break;case 2:if(e===i)return r.abrupt("return");r.next=4;break;case 4:a(i),o=t.width,s=t.height,window._stat_track("quality_subfunction_click",{original_size:"".concat(o,"*").concat(s),class:i===c.HD?"gq":"cq"});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[t,n]);return Object(Pe.jsxs)("div",{className:qe.a.wrap,children:[Object(Pe.jsxs)("div",{className:ze()(qe.a.item,Object(Ae.a)({},qe.a.active,e===c.HD)),onClick:function(){return i(c.HD)},children:[Object(Pe.jsx)(ke,{name:"Hd",fontSize:28,className:qe.a.icon}),"\u9ad8\u6e05"]}),Object(Pe.jsxs)("div",{className:ze()(qe.a.item,Object(Ae.a)({},qe.a.active,e===c.HDU)),onClick:function(){return i(c.HDU)},children:[Object(Pe.jsx)(ke,{name:"UltraHD",fontSize:28,className:qe.a.icon}),"\u8d85\u6e05",r?null:Object(Pe.jsx)("img",{src:Le,alt:""})]})]})}))),Be=n(789),Ge=n(47),Fe=(P=(n(388),n(202)),n(79)),Je=n(165),We=n(12);function Ve(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),t}function Ke(e){return e.getContext("2d").getImageData(0,0,e.width,e.height)}function Qe(){return(Qe=Object(p.a)(Object(d.a)().mark((function e(t,n){var a,r,c,i,o,s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(We.u)(n);case 2:return a=e.sent,e.next=5,Object(We.u)(t);case 5:for((c=e.sent).width=a.width,c.height=a.height,r=Ve(a),c=Ve(c),i=Ke(r),o=Ke(c),s=0;s<o.data.length;s+=4)i.data[s+3]=o.data[s+3];return r.getContext("2d").putImageData(i,0,0),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){var t,n=e.children,a=e.onUploadSuccess,r=e.onChange,c=e.onUploadFail,i=void 0!==(u=e.multiple)&&u,s=e.beforeUpload,u=void 0===(u=e.accept)?"image/png, image/jpeg, image/jpg":u,f=void 0!==(e=e.acceptPaste)&&e,b=Object(o.useRef)([]),m=Object(o.useRef)(0),h=Object(o.useRef)(0),j=Object(o.useRef)([]),g=Object(T.c)(),v=["INPUT","TEXTAREA"],w=xe().setOpaquePNGImageURL,O={name:"file",multiple:i,accept:u,fileList:j.current,onChange:function(e){j.current=e.fileList||[],null!=r&&r(e),m.current+h.current!==((null==(e=e.fileList)?void 0:e.length)||0)||m.current||_()},customRequest:function(e){return Object(p.a)(Object(d.a)().mark((function t(){var n,r,o,s;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g.show("\u4e0a\u4f20\u4e2d..."),w(null),n=e.file||e,t.next=6,Object(Fe.d)(n);case 6:if(r=t.sent,"image/png"===n.type)return t.next=10,nt(n);t.next=20;break;case 10:if(t.sent)return t.next=14,Object(We.u)(r.url);t.next=20;break;case 14:return o=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);for(var a=(e=n.getImageData(0,0,t.width,t.height)).data,r=0;r<a.length;r+=4)a[r+3]=255;return n.putImageData(e,0,0),t}(o=t.sent),t.next=18,Object(Fe.c)(o.toDataURL("image/png"));case 18:o=t.sent,w(o.url);case 20:b.current.unshift({url:r.url,width:n.width,height:n.height}),b.current.length===m.current&&((s=document.getElementById("J_image")).src=r.url,s.width=n.width,s.height=n.height,s.onload=function(){null!=a&&a(i?b.current:b.current[0]),_(),g.hide()}),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(0),g.hide(),null!=c&&c();case 28:case"end":return t.stop()}}),t,null,[[0,24]])})))()},beforeUpload:(t=Object(p.a)(Object(d.a)().mark((function e(t){var n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s)return e.abrupt("return",null==s?void 0:s());e.next=2;break;case 2:if("image/jpeg"===t.type||"image/jpg"===t.type||"image/png"===t.type){e.next=6;break}return Je.a.warning("\u53ea\u80fd\u4e0a\u4f20 JPG/PNG \u56fe\u7247"),e.abrupt("return",!1);case 6:if(20971520<=t.size)return Je.a.warning("\u4e0d\u652f\u6301\u8d85\u8fc720M\u56fe\u7247"),e.abrupt("return",!1);e.next=9;break;case 9:e.next=11;var a=t;return new Promise((function(e,t){var n=new FileReader;n.readAsDataURL(a),n.onload=function(a){var r=new Image;r.src=n.result,r.onload=function(){e({width:r.width,height:r.height})},r.onerror=function(){t({width:0,height:0})}}}));case 11:return n=e.sent,t.width=n.width,t.height=n.height,m.current++,e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},x=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n,a,r,c,i;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.includes((null==t?void 0:t.target).nodeName))return e.abrupt("return");e.next=2;break;case 2:if(n=null==(n=t.clipboardData)?void 0:n.items,a=null,r="",!n||!n.length){e.next=16;break}c=0;case 7:if(c<n.length){if("string"===n[c].kind)return r=t.clipboardData.getData("text"),e.abrupt("break",16);e.next=11}else e.next=16;break;case 11:return a=n[c].getAsFile(),e.abrupt("break",16);case 13:c++,e.next=7;break;case 16:if(r&&rt.test(r))return e.next=19,k(r,"file","image/jpeg");e.next=22;break;case 19:a=e.sent,e.next=25;break;case 22:if(r&&!rt.test(r))return Je.a.warning("\u56fe\u7247\u683c\u5f0f\u4e0d\u7b26\u5408\u8981\u6c42"),e.abrupt("return");e.next=25;break;case 25:return e.next=27,null==(i=O.beforeUpload)?void 0:i.call(O,a,[]);case 27:if(!e.sent){e.next=29;break}null!=(i=O.customRequest)&&i.call(O,a);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(Object(o.useEffect)((function(){var e;return f&&null!=(e=document)&&e.addEventListener("paste",x),function(){var e;null!=(e=document)&&e.removeEventListener("paste",x)}}),[]),function(){j.current=[],b.current=[],m.current=0,h.current=0}),k=function(e,t,n){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))};return Object(Pe.jsx)(Pe.Fragment,{children:Object(Pe.jsx)(at,Object(l.a)(Object(l.a)({},O),{},{itemRender:function(){return null},children:n}))})}function Xe(e,t,n,a){var r=(n=lt(n)).width;n=n.height,r=Math.min((r-a)/e,(n-a)/t);return 4<(r=(r=Number.isNaN(r)?.3:r)<.01?.01:r)?4:r}function Ze(){var e=_e();return Object(Pe.jsx)(St.a,{userInfo:e,projectName:"ai-quality",isShowCommunity:!1})}function $e(e){return window.sessionStorage.getItem(e)&&decodeURIComponent(window.sessionStorage.getItem(e))}function et(e,t){window.sessionStorage.setItem(e,encodeURIComponent(t))}n(757);var tt,nt=function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n,a,r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;var c=t;return new Promise((function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=t,n.readAsArrayBuffer(c)}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if(a=new Uint8Array(n,0,26),r="",a.slice(12,16).forEach((function(e){r+=String.fromCharCode(e)})),"IHDR"!==r||6!==a[25]&&4!==a[25]&&3!==a[25]){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=P.a.Dragger,rt=/(http|https):\/\/[^\s]+/i,ct=((D=tt=tt||{}).JPG="JPG",D.PNG="PNG",s.a.memo((function(){var e=pe(),t=(Object(u.a)(),Object(o.useState)(!1)),n=(t=Object(f.a)(t,2))[0],a=t[1],r=(t=Object(o.useState)(tt.JPG),(t=Object(f.a)(t,2))[0]),i=t[1],s=(fe(),_e()),b=(t=Ee()).isInSDK,m=t.sendMessage,h=ve(),j=je(),g=(t=Oe(),me()),v=(he(),Object(T.c)()),w=A((function(e){return e.stageModel.resetStage})),O=Object(o.useCallback)(Object(p.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=s&&s.is_vip)return e.abrupt("return");e.next=2;break;case 2:if(null!=s&&s.id){e.next=15;break}return e.next=5,$();case 5:if(e.sent)return e.next=9,N({});e.next=13;break;case 9:if(null!=(t=e.sent)&&t.is_vip){e.next=13;break}return ne({entrance:"topnav",second_source:g===c.HD?"gq":"cq"}),e.abrupt("return");case 13:e.next=16;break;case 15:ne({entrance:"topnav",second_source:g===c.HD?"gq":"cq"});case 16:case"end":return e.stop()}}),e)}))),[s,g]),x=Object(o.useCallback)(Object(p.a)(Object(d.a)().mark((function t(){var n,a,i,o;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=s&&s.id){t.next=4;break}return t.next=3,$();case 3:return t.abrupt("return");case 4:if(window._stat_track("quality_download_icon_click",{original_size:"".concat(e.width,"*").concat(e.height)}),g!==c.HDU||s.is_vip){t.next=8;break}return ne({second_source:"cq",source:"hzxf",entrance:"save"}),t.abrupt("return");case 8:return t.next=10,G(Object(l.a)(Object(l.a)({},h),{},{is_saved:1}));case 10:if(11004===t.sent.data.code)return t.next=14,Ge.f.info({duration:.7,content:"\u60a8\u5df2\u8d85\u8fc7\u4eca\u65e5\u7684\u514d\u8d39\u989d\u5ea6\uff0c\u5f00\u901a\u4f1a\u5458\u540e\u53ef\u7545\u4eab\u4e0d\u9650\u91cf\u5f20\u6570\u4e0b\u8f7d"}).then((function(){ne({second_source:g===c.HD?"gq":"cq",source:"hzxf",entrance:"save"})}));t.next=15;break;case 14:return t.abrupt("return");case 15:v.show("\u4e0b\u8f7d\u4e2d..."),n=r===tt.JPG?"image/jpeg":"image/png",a=document.createElement("canvas"),i=a.getContext("2d"),(o=new Image).crossOrigin="Anonymous",o.src=e.resultUrl,a.width=h.width||e.width,a.height=h.height||e.height,o.onload=Object(p.a)(Object(d.a)().mark((function t(){var s,u,l,p;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r===tt.JPG&&(i.fillStyle="#fff",i.fillRect(0,0,a.width,a.height)),i.drawImage(o,0,0,a.width,a.height),b?(s=a.toDataURL("image/".concat(n)),m({url:s,suffix:r,type:ye.SAVE}),t.next=21):t.next=7;break;case 7:return s=a.toDataURL(n,1),t.next=10,fetch(s);case 10:return u=t.sent,t.next=13,u.blob();case 13:u=t.sent,l=URL.createObjectURL(u),(p=document.createElement("a")).download="\u4e0b\u8f7d",p.href=l,document.body.appendChild(p),p.click(),p.remove();case 21:window._stat_track("quality_download_success",{original_size:"".concat(e.width,"*").concat(e.height),class:g===c.HD?"gq":"cq"}),v.hide();case 23:case"end":return t.stop()}}),t)})));case 23:case"end":return t.stop()}}),t)}))),[r,e.resultUrl,e.width,e.height,s,h,t,g]);return t=Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)("div",{className:"title",children:"\u4e0b\u8f7d"}),Object(Pe.jsx)(Ge.h,{defaultValue:r,style:{width:248},onChange:function(e){i(e)},options:[{value:tt.JPG,label:tt.JPG},{value:tt.PNG,label:tt.PNG}]}),Object(Pe.jsxs)(Ge.a,{type:"primary",className:"download",onClick:function(){return x()},children:[Object(Pe.jsx)("span",{})," ",Object(Pe.jsx)("div",{children:"\u4e0b\u8f7d"})]})]}),Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsxs)("div",{className:Me.a.header,style:{background:e.url?"#fff":"transparent"},children:[Object(Pe.jsx)(De,{}),Object(Pe.jsxs)("div",{className:Me.a.right,children:[null!=s&&s.id&&null!=s&&s.is_vip||b?null:Object(Pe.jsx)("div",{className:Me.a.buyVip,children:Object(Pe.jsx)(Be.a,{handleClick:O})}),e.url?Object(Pe.jsxs)("div",{className:Me.a.upload,children:[Object(Pe.jsxs)(Ge.a,{type:"text",className:Me.a.reUpload,onClick:function(){j||(document.querySelector(".ant-upload > input").click(),window._stat_track("quality_upload_click"))},children:[Object(Pe.jsx)(ke,{name:"PlusBold",fontSize:16,className:Me.a.icon}),"\u91cd\u65b0\u4e0a\u4f20"]}),Object(Pe.jsx)(Ge.g,{content:t,trigger:"click",open:n,onOpenChange:function(e){j||a(e)},overlayClassName:"downloadPopover",children:Object(Pe.jsxs)(Ge.a,{type:"primary",className:Me.a.download,children:[Object(Pe.jsx)(ke,{name:"DownloadBlack",fontSize:16,className:Me.a.icon}),"\u4e0b\u8f7d"]})})]}):null,b?null:Object(Pe.jsx)(Ue,{})]}),Object(Pe.jsx)("div",{className:Me.a.uploadWrap,children:Object(Pe.jsx)(Ye,{onUploadSuccess:function(e){var t=e.width,n=e.height;e=e.url;window._stat_track("quality_upload_yes",{original_size:"".concat(t,"*").concat(n)}),window._stat_track("quality_subfunction_click",{original_size:"".concat(t,"*").concat(n),class:"gq"}),w({width:t,height:n,url:e,resultUrl:"",modes:1})}})})]}),e.url?Object(Pe.jsx)(He,{}):null]})}))),it=n(418),ot=(h=n(65),n.n(h)),st=n.p+"static/images/03afe80f59c57b500ed4260e2d54b39d.png",ut=s.a.memo((function(e){var t=e.topRightText,n=e.imgUrl,a=e.children,r=e.height,c=e.width,i=void 0!==(s=e.showWaterMark)&&s,s=void 0!==(s=e.showRemoveBtn)&&s,u=e.onRemoveBtn,l=(e.targetNode,Object(o.useRef)(null)),f=(e=le(),be()),b=Object(o.useRef)({x:0,y:0}),m=Object(o.useRef)(),h=Object(o.useRef)(),j=Object(o.useRef)(null),g=pe(),v=fe(),w=ve(),O=e*c,x=e*r;return Object(o.useEffect)((function(){m.current=g}),[g]),Object(o.useEffect)((function(){null!=l&&l.current&&n&&function(){var e=Object(p.a)(Object(d.a)().mark((function e(t){var n,a,i,o;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.current,a=null==n?void 0:n.getContext("2d"),null!=(i=h.current)&&i.width&&(null==(i=h.current)?void 0:i.width)!==c&&null!=a&&a.clearRect(0,0,h.current.width,h.current.height),e.next=5,ue(t);case 5:i=e.sent,o=i.img,n.width=w.width||c,n.height=w.height||r,null!=a&&a.drawImage(o,0,0,n.width,n.height),h.current={width:c,height:r};case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n)}),[n,l,r,c,w]),Object(o.useEffect)((function(){if(f&&j.current){var e,t,n,a,r,c,i=j.current;if(i)return e=!1,n=t=null,r=function(a){var r;e&&(r=a.pageX-b.current.x,a=a.pageY-b.current.y,v({left:r+parseInt(n),top:a+parseInt(t)}))},c=function(t){e=!1,b.current={x:0,y:0}},i.addEventListener("mousedown",a=function(a){b.current={x:a.pageX,y:a.pageY};var r=(a=m.current).top;a=a.left;t=r,n=a,e=!0}),i.addEventListener("mousemove",r),document.addEventListener("mouseup",c),function(){i.removeEventListener("mousedown",a),i.removeEventListener("mousemove",r),document.removeEventListener("mouseup",c)}}}),[f,e,j]),Object(o.useEffect)((function(){var e,t,n,a=null;return j.current&&i?(e=function(){var e,t;document.getElementById("J_watermark")||((t=document.createElement("div")).id="J_watermark",t.setAttribute("style","display: block;\n                position: absolute;\n                left: 0px;\n                top: 0px;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                background-image: url('".concat(st,"');\n                background-repeat: repeat;\n                background-size: 129px;\n                opacity: 0.5;\n                z-index:1")),null!=(e=j.current)&&e.appendChild(t))},t=j.current,(a=new MutationObserver((function(t,n){var a,r=Object(it.a)(t);try{for(r.s();!(a=r.n()).done;){var c,i=a.value;"childList"===i.type?e():"attributes"===i.type&&(c=document.getElementById("J_watermark"))&&"none"===getComputedStyle(c).display&&(c.style.display="block")}}catch(t){r.e(t)}finally{r.f()}}))).observe(t,{attributes:!0,childList:!0,subtree:!0}),e()):(null!=(t=a)&&t.disconnect(),(t=document.getElementById("J_watermark"))&&null!=(n=j.current)&&n.removeChild(t)),function(){var e;null!=(e=a)&&e.disconnect()}}),[j,i]),Object(Pe.jsxs)("div",{className:ot.a.canvasWrap,children:[Object(Pe.jsx)("div",{className:ot.a.container,children:Object(Pe.jsxs)("div",{className:ot.a.canvasScaleWrap,style:{width:O,height:x,top:g.top,left:g.left,cursor:f?"grab":"default"},ref:j,children:[Object(Pe.jsx)("canvas",{className:ot.a.canvas,ref:l}),s&&i?Object(Pe.jsx)("div",{className:ot.a.remove,onClick:function(){return null==u?void 0:u()},children:"\u79fb\u9664\u6c34\u5370"}):null]})}),a,t?Object(Pe.jsx)("div",{className:ot.a.topRightText,children:t}):null]})})),lt=function(e){var t;if(e)return{width:Number(null==(t=document)||null==(t=t.defaultView)?void 0:t.getComputedStyle(e).width.replace(/px/,"")),height:Number(null==(t=document)||null==(t=t.defaultView)?void 0:t.getComputedStyle(e).height.replace(/px/,""))};throw new Error("element is missing!")},dt=n.p+"static/media/loading.8415ec4c.svg",pt=new Map,ft=s.a.memo((function(){var e=(a=pe()).width,t=a.height,n=a.url,a=a.resultUrl,r=Object(o.useState)(!1),i=(r=Object(f.a)(r,2))[0],s=r[1],u=A((function(e){return e.stageModel.setIsDoQuality})),b=fe(),m=(r=je(),ge()),h=Object(o.useRef)(null),j=de(),g=Object(o.useRef)({}),v=_e(),w=me(),O=we(),x=A((function(e){return e.stageModel.setDownloadCount})),_=Oe(),k={setCache:function(e){var t=e.result,n=e.origin;e=e.type,n="".concat(n,"-").concat(e);pt.get(n)||pt.set(n,t||"")},getCache:function(e){var t=e.origin;e=e.type,t="".concat(t,"-").concat(e);if(e=pt.get(t))return e}},y=k.setCache,C=k.getCache,S=ge(),N=xe().opaquePNGImageURL;k=!1,null!=v&&v.id?v.is_vip?k=!1:(w===c.HDU&&!v.is_vip||5<=_)&&(k=!0):k=!0,Object(o.useEffect)((function(){m(g.current)}),[g.current]),Object(o.useEffect)((function(){var a,r,i;h&&(a=h.current)&&(a=Xe(e,t,a,0),j(a)),n&&(u(!0),r=w===c.HD?1:0,((i=C({origin:n,type:w}))?function(){var a=Object(p.a)(Object(d.a)().mark((function a(){var o,s;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,G({image_url:n,res_image_url:i,modes:r,id:void 0});case 2:o=a.sent,null!=(s=o.data.data)&&s.id&&S({id:null==(s=o.data.data)?void 0:s.id}),(s=document.getElementById("J_result_image")).src=i,s.width=e,s.width=t,s.onload=Object(p.a)(Object(d.a)().mark((function a(){var r;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q();case 2:(r=a.sent).data.data&&O(1===r.data.data.show_pop),x((null==(r=o.data.data)?void 0:r.downloaded_count)||0),b({url:n,resultUrl:i}),setTimeout((function(){u(!1)}),100),window._stat_track("quality_create_duration",{origin:"".concat(e,"*").concat(t),class:w===c.HD?"gq":"cq"});case 8:case"end":return a.stop()}}),a)})));case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}:function(){var a=Object(p.a)(Object(d.a)().mark((function a(){var r,i,o,m,h;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,G({image_url:n,modes:1});case 2:if(o=a.sent,x((null==(r=o.data.data)?void 0:r.downloaded_count)||0),g.current={id:null==(r=o.data.data)?void 0:r.id,image_url:n,modes:1},null!=(r=o.data.data)&&r.id)return o=(i=!!N)?N:n,a.next=10,(w===c.HD?z:H)(o);a.next=12;break;case 10:m=a.sent,null!=(r=m.data.data)&&r.msg_id?h=setInterval(Object(p.a)(Object(d.a)().mark((function a(){var r,c,o,j,v,x,_;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B(m.data.data.msg_id);case 2:if(v=a.sent,null!=(x=v.data.data)&&x.media_info_list.length)if(clearInterval(h),x=null==(x=v.data.data)?void 0:x.media_info_list,x=(x=Object(f.a)(x,1))[0],v=null==(v=v.data.data.parameter)||null==(v=v.spend_time)?void 0:v.split(" "),v=Object(f.a)(v,2),r=v[0],v[1],v=x.media_profiles,x=x.media_data,c=v.media_data_height,o=v.media_data_width,x){if(j=x,i)return a.next=15,function(){return Qe.apply(this,arguments)}(n,j);a.next=20}else a.next=28;else a.next=28;break;case 15:return v=a.sent,a.next=18,Object(Fe.c)(v.toDataURL("image/png"));case 18:x=a.sent,j=x.url;case 20:return g.current=Object(l.a)(Object(l.a)({},g.current),{},{width:o,height:c,res_image_url:j}),a.next=23,G(Object(l.a)({},g.current));case 23:(_=document.getElementById("J_result_image")).src=j,_.width=e,_.width=t,_.onload=Object(p.a)(Object(d.a)().mark((function a(){var c;return Object(d.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q();case 2:(c=a.sent).data.data&&O(1===c.data.data.show_pop),b({width:e,height:t,url:n,resultUrl:j}),y({origin:n,type:w,result:j}),s(!0),setTimeout((function(){u(!1)}),100),window._stat_track("quality_create_duration",{origin:"".concat(e,"*").concat(t),class:w,duration:r});case 9:case"end":return a.stop()}}),a)})));case 28:case"end":return a.stop()}}),a)}))),1e3):(u(!1),Ge.f.error("\u753b\u8d28\u4fee\u590d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"));case 12:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()())}),[e,t,n,w]),_=Object(o.useCallback)(Object(p.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=v&&v.id){e.next=4;break}return e.next=3,$();case 3:return e.abrupt("return");case 4:ne({entrance:"func",second_source:w===c.HD?"gq":"cq"});case 5:case"end":return e.stop()}}),e)}))),[null==v?void 0:v.id,w]);return Object(Pe.jsxs)("div",{className:ot.a.canvasStage,children:[Object(Pe.jsx)("div",{className:ze()(ot.a.canvasWindow,"canvas-window"),ref:h,children:Object(Pe.jsx)(ut,{width:e,height:t,topRightText:"\u539f\u56fe",imgUrl:n,targetNode:"J_image"})}),Object(Pe.jsx)(Ge.b,{type:"vertical",style:{height:"100vh",margin:0}}),Object(Pe.jsx)("div",{className:ot.a.canvasWindow,id:"J_result_canvas",children:Object(Pe.jsx)(ut,{width:e,height:t,topRightText:"\u9884\u89c8",imgUrl:a||n,showWaterMark:k&&i,showRemoveBtn:!0,onRemoveBtn:_,targetNode:"J_result_image",children:r?Object(Pe.jsxs)("div",{className:ot.a.loadingWrap,children:[Object(Pe.jsx)("img",{className:ot.a.loadingSvg,src:dt,alt:""}),Object(Pe.jsx)("div",{className:ot.a.title,children:"\u6b63\u5728\u5904\u7406\u4e2d..."}),Object(Pe.jsx)("div",{className:ot.a.desc,children:"\u4e91\u7aef\u5904\u7406\u901f\u5ea6\u4e0e\u7f51\u7edc\u901f\u5ea6\u548c\u56fe\u7247\u5927\u5c0f\u6709\u5173\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85~"})]}):null})})]})})),bt=(U=n(207),n.n(U)),mt=s.a.memo((function(){var e=de(),t=pe(),n=fe();return Object(Pe.jsxs)("div",{className:bt.a.scaleList,children:[[4,2,1.25,1,.75,.5,.25,.1].map((function(t){return Object(Pe.jsxs)("div",{className:bt.a.item,onClick:function(){e(t)},children:[100*t,"%"]},t)})),Object(Pe.jsx)("div",{className:bt.a.item,onClick:function(){var a=document.querySelector(".canvas-window");a&&(a=Xe(t.width,t.height,a,0),n({top:0,left:0}),e(a))},children:"\u9002\u5e94\u5c4f\u5e55"}),Object(Pe.jsx)("div",{className:bt.a.item,onClick:function(){e(1)},children:"\u5b9e\u9645\u5927\u5c0f"})]})})),ht=(P=(n(765),n(123)),n.n(P)),jt=s.a.memo((function(){var e=le(),t=de(),n=A((function(e){return e.stageModel.setIsStageDrop})),a=be(),r=je(),c="".concat(Math.floor(100*e),"%"),i=Object(o.useCallback)((function(){var n;r||(n=1,t(n=(n=e-.1)<.1?.1:n))}),[e,r]),s=Object(o.useCallback)((function(){var n;r||(n=1,t(n=4<(n=e+.1)?4:n))}),[e,r]),u=Object(o.useCallback)((function(){r||n(!a)}),[a,r]);return Object(Pe.jsxs)("div",{className:ht.a.wrap,children:[Object(Pe.jsx)("div",{className:ze()(ht.a.drop,Object(Ae.a)({},ht.a.active,a)),onClick:function(){return u()},children:Object(Pe.jsx)(ke,{name:"HandBold",fontSize:18})}),Object(Pe.jsx)(Ge.b,{type:"vertical",style:{height:"24px"}}),Object(Pe.jsxs)("div",{className:ze()(ht.a.scale,Object(Ae.a)({},ht.a.notAllow,r)),children:[Object(Pe.jsx)(ke,{className:ht.a.icon,name:"MinusBlack",fontSize:14,onClick:function(){return i()}}),Object(Pe.jsx)(Ge.g,{content:Object(Pe.jsx)(mt,{}),trigger:"hover",placement:"top",overlayClassName:"mattingPageController",children:Object(Pe.jsx)("span",{className:ht.a.count,children:c})}),Object(Pe.jsx)(ke,{className:ht.a.icon,name:"PlusBlack",fontSize:14,onClick:function(){return s()}})]})]})})),gt=(D=n(279),n.n(D)),vt=(h=n(74),n.n(h)),wt=(U={},Object(Ae.a)(U,c.HD,"https://xiuxiupro-material-center.meitudata.com/poster/08dcf138ba65ad237c2b732888a3ea1c.mp4"),Object(Ae.a)(U,c.HDU,"https://xiuxiupro-material-center.meitudata.com/poster/cbf409941976dfc6e239e32fab73a14b.mp4"),U),Ot=s.a.memo((function(){var e=Object(o.useState)(c.HD),t=(e=Object(f.a)(e,2))[0],n=e[1],a=fe();e=wt[t];return Object(Pe.jsxs)("div",{className:vt.a.wrap,children:[Object(Pe.jsx)("div",{className:vt.a.title,children:"\u53d8\u6e05\u6670"}),Object(Pe.jsx)("div",{className:vt.a.desc,children:"\u8d85\u6e05\u753b\u8d28\u91cd\u751f\uff0c\u544a\u522b\u6e23\u753b\u8d28"}),Object(Pe.jsxs)("div",{className:vt.a.content,children:[Object(Pe.jsxs)("div",{className:vt.a.video,children:[Object(Pe.jsx)("video",{src:e,loop:!0,autoPlay:!0,muted:!0}),Object(Pe.jsxs)("div",{className:vt.a.videoTab,children:[Object(Pe.jsxs)("div",{className:ze()(Object(Ae.a)({},vt.a.active,t===c.HD)),onClick:function(){return n(c.HD)},children:[Object(Pe.jsx)(ke,{name:"Hd",fontSize:20,className:vt.a.icon}),"\u9ad8\u6e05"]}),Object(Pe.jsxs)("div",{className:ze()(Object(Ae.a)({},vt.a.active,t===c.HDU)),onClick:function(){return n(c.HDU)},children:[Object(Pe.jsx)(ke,{name:"UltraHD",fontSize:20,className:vt.a.icon}),"\u8d85\u6e05"]})]})]}),Object(Pe.jsx)(Ye,{onUploadSuccess:function(e){var t=e.width,n=e.height;e=e.url;window._stat_track("quality_upload_yes",{original_size:"".concat(t,"*").concat(n)}),a({width:t,height:n,url:e})},acceptPaste:!0,children:Object(Pe.jsx)("div",{className:vt.a.uploadContainer,onClick:function(e){return e.stopPropagation()},children:Object(Pe.jsxs)("div",{className:vt.a.upload,children:[Object(Pe.jsxs)("button",{onClick:function(){document.querySelector(".ant-upload > input").click(),window._stat_track("quality_upload_click")},children:[Object(Pe.jsx)(ke,{name:"UploadBlack",fontSize:18,className:vt.a.icon}),"\u4e0a\u4f20\u56fe\u7247"]}),Object(Pe.jsxs)("p",{children:["\u62d6\u62fd\u56fe\u7247&\u7c98\u8d34\u56fe\u7247&\u7c98\u8d34\u56fe\u7247URL\u81f3\u6b64\u5904 ",Object(Pe.jsx)("br",{}),"\u652f\u6301JPG\u3001JPEG\u3001PNG"]})]})})})]})]})})),xt=(P=n(91),n.n(P)),_t=[{img:n.p+"static/images/3e987b78428c2e9f45d0c7a94a2c8759.png",name:"\u4e0d\u6ee1\u610f",statsLogName:"dissatisfied",id:1},{img:n.p+"static/images/cb8d61e9291f547b407b0e6161f2e345.png",name:"\u4e00\u822c",statsLogName:"general",id:2},{img:n.p+"static/images/bf2939b5a7b2b47027c7ba2ad9e1c9f7.png",name:"\u6ee1\u610f",statsLogName:"satisfied",id:3}],kt="AI_QUALITY_EFFECT_MODAL",yt=s.a.memo((function(){var e=M((function(e){return e.stageModel.showEffectModal})),t=we(),n=(e=e&&!localStorage.getItem(kt),ve()),a=Object(o.useCallback)(function(){var e=Object(p.a)(Object(d.a)().mark((function e(a){var r,c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.score,"never"===(c=a.type)&&localStorage.setItem(kt,"".concat(+new Date)),"close"===c&&t(!1),e.next=5,G({score:r,id:n.id});case 5:t(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]);return Object(Pe.jsx)("div",{className:xt.a.EffectFeedbackModal,style:{display:e?"":"none"},children:Object(Pe.jsxs)("div",{className:xt.a.feedbackContainer,children:[Object(Pe.jsxs)("div",{className:xt.a.header,children:[Object(Pe.jsx)("div",{className:xt.a.title,children:"\u6548\u679c\u6ee1\u610f\u5ea6"}),Object(Pe.jsxs)("div",{className:xt.a.titleButtonContainer,children:[Object(Pe.jsx)("div",{className:xt.a.button,onClick:function(){a({score:0,type:"never"})},children:"\u4e0d\u518d\u63d0\u9192"}),Object(Pe.jsx)("div",{className:xt.a.close,onClick:function(){a({score:0,type:"close"})},children:Object(Pe.jsx)(ke,{name:"CrossBlack",fontSize:14})})]})]}),Object(Pe.jsx)("div",{className:xt.a.contentContainer,children:_t.map((function(e){return Object(Pe.jsxs)("div",{className:xt.a.buttonBox,onClick:function(){a({score:e.id,type:"button"})},children:[Object(Pe.jsx)("div",{className:xt.a.buttonImage,children:Object(Pe.jsx)("img",{src:e.img,alt:"",style:{width:"100%"}})}),Object(Pe.jsx)("div",{className:xt.a.buttonText,children:e.name})]},e.name)}))})]})})})),Ct=s.a.memo((function(){var e=pe();return Object(Pe.jsxs)("div",{className:gt.a.stage,children:[e.url?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(ft,{}),Object(Pe.jsx)(jt,{})]}):Object(Pe.jsx)(Ot,{}),Object(Pe.jsx)(yt,{}),Object(Pe.jsx)("img",{src:"",alt:"",id:"J_image",className:gt.a.image}),Object(Pe.jsx)("img",{src:"",alt:"",id:"J_result_image",className:gt.a.image})]})})),St=n(425),Nt=(D=n(329),n.n(D)),It=(h=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,796)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP;t=t.getTTFB;n(e),a(e),r(e),c(e),t(e)}))},n(788)),Et=n(792),Pt=(U=n(420),n.n(U)),Dt="ai-quality-sdk",Rt=[];window._stat_track=function(e,t){Rt.push({name:e,options:t})},function(){var e=Object(p.a)(Object(d.a)().mark((function e(){var t,n,a,r,c,i,o,s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.a.parse(window.location.search),n=window.localStorage.getItem("uid"),a="",F.clientInfo.isClient)return e.next=6,F.bridge.getServerGid();e.next=7;break;case 6:a=e.sent;case 7:if(se())return window._stat_track=function(e,t){},e.abrupt("return");e.next=10;break;case 10:return t.channel&&(et("channel",t.channel),et("first_url",decodeURIComponent(t.first_url||window.location.href))),t.matrix_channel&&et("matrix_channel",t.matrix_channel||""),i="C5F34252F04B6D50",o="2.8.0.0",s="zh-CN",c="release",null!=(r=window.mtstat)&&r.init({app_key:i,app_version:o,app_language:s,env:c,log_level:0,debugger:!0,channel:decodeURIComponent(t.channel||$e("channel")||""),module_id:"hzxf"}),r="web",F.clientInfo.isClient&&(r=F.clientInfo.isMac?"macos":"windows"),null!=(i=window.mtstat)&&i.setCommonParams({operate_source:r,title:document.title,url:window.location.href,source:t.from||"other",matrix_channel:t.matrix_channel||$e("matrix_channel")||"",first_url:decodeURIComponent(t.first_url||$e("first_url")||""),channel:decodeURIComponent(t.channel||$e("channel")||""),func_enter:""}),F.clientInfo.isClient?null!=(o=window.mtstat)&&o.setGid(a,"pc"):t.origin===Dt&&t.platform&&null!=(s=window.mtstat)&&s.setCommonParams({is_sdk:Dt,company_key:t.platform}),n&&null!=(c=window.mtstat)&&c.login(n),i={},e.prev=20,e.t0=Object,e.t1=i,e.next=25,Object(It.b)().then(Et.b);case 25:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2),e.next=32;break;case 29:e.prev=29,e.t3=e.catch(20),Pt.a.captureException(e.t3,{logger:"@meitu/fingerprint"});case 32:return null!=(r=window.mtstat)&&r.setCommonParams(Object(l.a)({},i)),e.next=35,K();case 35:return window._stat_track=function(e,t){var n;se()||null!=(n=window.mtstat)&&n.track(e,t)},e.next=38,Object(It.a)();case 38:(o=e.sent)&&null!=(s=window.mtstat)&&s.track.apply(null,Object(Et.a)(o)),window.mtstat&&0!==Rt.length&&(Rt.forEach((function(e){var t;null!=(t=window.mtstat)&&t.track(e.name,e.options)})),Rt=[]);case 41:case"end":return e.stop()}}),e,null,[[20,29]])})));return function(){return e.apply(this,arguments)}}()(),n(777),P=n(41),Object(Fe.b)({type:"ai_quality",env:Fe.a.Release}),s=se()?P.a.dev:P.a.release;i.a.render(Object(Pe.jsx)(t.a,{store:L,children:Object(Pe.jsx)(P.b,{value:{env:s,client_id:g},children:Object(Pe.jsx)((function(){var e=Object(u.a)(),t=Ee().isInSDK;return Object(o.useEffect)((function(){e.setWhiteTheme(),window._stat_track("quality_enter")}),[]),Object(Pe.jsxs)("div",{className:Nt.a.app,children:[Object(Pe.jsx)(ct,{}),Object(Pe.jsxs)("div",{className:Nt.a.content,children:[Object(Pe.jsx)(Ct,{}),Object(Pe.jsx)(T.a,{isStage:!0}),Object(Pe.jsx)(Ze,{})]}),t?Object(Pe.jsx)(Ie,{}):null]})}),{})})}),document.getElementById("root")),h()},91:function(e,t,n){e.exports={EffectFeedbackModal:"EffectFeedbackModal--Nzk9O",effectFeedbackModal:"EffectFeedbackModal--Nzk9O",feedbackContainer:"feedbackContainer--Xg475",header:"header--0jams",title:"title--SBAqC",titleButtonContainer:"titleButtonContainer--EilE4",button:"button--mNjK8",close:"close--JwR8l",contentContainer:"contentContainer--wJQm-",buttonBox:"buttonBox--nFAYI",buttonImage:"buttonImage--YwFtz"}}},[[468,4,0,2,1]]]);